---
description: 
globs: 
alwaysApply: true
---
# ğŸ› ï¸ Next.js + Supabase ê¸°ë°˜ í”„ë¡œì íŠ¸ í´ë” ë¦¬íŒ©í† ë§ ê°€ì´ë“œ

ì´ ë¬¸ì„œëŠ” ê¸°ì¡´ `src/app` ê¸°ë°˜ì˜ êµ¬ì¡°ë¥¼ ë„ë©”ì¸ ì¤‘ì‹¬ + í† ìŠ¤ ì½”ë“œ í€„ë¦¬í‹° ê¸°ì¤€ì— ë”°ë¼ ì¬êµ¬ì„±í•˜ê¸° ìœ„í•œ ë¦¬íŒ©í† ë§ ë§¤ë‰´ì–¼ì…ë‹ˆë‹¤.  
Supabase, React Query, Zustand, Next.js App Router ë“±ì„ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì íŠ¸ì— ìµœì í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“¦ ë¦¬íŒ©í† ë§ ëª©ì 

- ê´€ì‹¬ì‚¬ ë¶„ë¦¬ (components, hooks, types ë“±)
- ë„ë©”ì¸ ê¸°ë°˜ í´ë” êµ¬ì¡°ë¡œ ì‘ì§‘ë„ ê°•í™”
- ê³µí†µ ëª¨ë“ˆ ë¶„ë¦¬ (shared/*)
- ì½”ë“œ ê°€ë…ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- **API ë¼ìš°íŠ¸ë¥¼ ì œê±°í•˜ê³  ì„œë²„ ì•¡ì…˜ ê¸°ë°˜ìœ¼ë¡œ ì¬êµ¬ì„±**

---

## ğŸ§± ê¸°ì¡´ êµ¬ì¡° ì˜ˆì‹œ

```txt
src/app/
â”œâ”€â”€ auth/
â”œâ”€â”€ boards/
â”œâ”€â”€ shop/
â”œâ”€â”€ components/
â”œâ”€â”€ hooks/
â”œâ”€â”€ context/
â”œâ”€â”€ utils/
â”œâ”€â”€ types/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx
â””â”€â”€ RootLayoutClient.tsx
```

---

## âœ… ì¶”ì²œ êµ¬ì¡° (ë„ë©”ì¸ ê¸°ë°˜ + ì„œë²„ ì•¡ì…˜)

```txt
src/
â”œâ”€â”€ app/                         # Next.js App Router (ê²½ë¡œ ì¤‘ì‹¬)
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ RootLayoutClient.tsx
â”œâ”€â”€ domains/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ actions.ts         # âœ… ì„œë²„ ì•¡ì…˜ë§Œ ì‚¬ìš©
â”‚   â”‚   â””â”€â”€ types/
â”‚   â”œâ”€â”€ boards/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ actions.ts         # âœ… ê¸°ì¡´ API ì œê±°
â”‚   â”‚   â””â”€â”€ types/
â”‚   â””â”€â”€ livescore/
â”‚       â”œâ”€â”€ match/
â”‚       â”œâ”€â”€ team/
â”‚       â””â”€â”€ player/
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ constants/
â”‚   â”œâ”€â”€ context/
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ supabase.ts        # âœ… supabase í´ë¼ì´ì–¸íŠ¸ë§Œ ìœ ì§€
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ globals.css

êµ¬ì¡°ëŠ” ì°¸ê³ ë§Œí•˜ê³  ê¸°ì¡´ì— êµ¬ì„±ë˜ì–´ìˆë˜ í˜ì´ì§€, ì»´í¬ë„ŒíŠ¸ë“± êµ¬í˜„í•´ì•¼í•¨ ì•„ë˜ì— ê¸°ì¡´ êµ¬ì¡°ì— ëŒ€í•œ ì„¤ëª…ì´ ì°¸ê³  ë˜ì–´ìˆìŠµë‹ˆë‹¤.
```

---

## â› ìë™ ë¦¬íŒ©í† ë§ ìŠ¤í¬ë¦½íŠ¸ (bash)

```bash
#!/bin/bash

# ë„ë©”ì¸ í´ë” ìƒì„±
mkdir -p src/domains/boards/{components,hooks,types}
mkdir -p src/domains/auth/{components,hooks,types}
mkdir -p src/domains/shop/{components,services,types}
mkdir -p src/shared/{components,hooks,utils,constants,context,api}

# ê³µí†µ ëª¨ë“ˆ ì´ë™
mv src/app/utils/* src/shared/utils/ 2>/dev/null
mv src/app/hooks/* src/shared/hooks/ 2>/dev/null
mv src/app/constants/* src/shared/constants/ 2>/dev/null

# ë„ë©”ì¸ ì˜ˆì‹œ ì´ë™ (ì‹¤ì œ íŒŒì¼ëª…ì— ë§ê²Œ ì¡°ì • í•„ìš”)
mv src/app/boards/* src/domains/boards/components/ 2>/dev/null
mv src/app/auth/* src/domains/auth/components/ 2>/dev/null
mv src/app/shop/* src/domains/shop/components/ 2>/dev/null

echo "âœ… êµ¬ì¡° ë¦¬íŒ©í† ë§ ì™„ë£Œ: domains/ & shared/ ì •ë¦¬ë¨!"
```

> ğŸ’¡ ê¸°ì¡´ `api/` ë””ë ‰í† ë¦¬ëŠ” ì œê±°í•˜ê³ , ëª¨ë“  API í˜¸ì¶œì€ `server action`ìœ¼ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.

---

## ğŸ§  ë„ë©”ì¸ ì˜ˆì‹œ êµ¬ì¡° (`boards`)

```txt
src/domains/boards/
â”œâ”€â”€ components/
â”œâ”€â”€ hooks/
â”œâ”€â”€ actions.ts         # âœ… ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì•¡ì…˜
â”œâ”€â”€ types/
â””â”€â”€ index.ts
```
# ğŸ“¦ í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡° ì„¤ëª…ì„œ (ê¸°ì¡´ êµ¬ì¡° ê¸°ì¤€)

> í”„ë¡œì íŠ¸ ìœ„ì¹˜: `src/app/`  
> ëª©ì : í´ë”ë³„ ì—­í•  ë° êµ¬ì¡° íŒŒì•…  
> ì°¸ê³  ê¸°ì¤€: í† ìŠ¤ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ í’ˆì§ˆ ê°€ì´ë“œ

---

## ğŸ“ ë””ë ‰í† ë¦¬ íŠ¸ë¦¬ êµ¬ì¡°

```txt
src/app/
â”œâ”€â”€ actions/            # ê²Œì‹œíŒ ë“± ì¼ë¶€ ê¸°ëŠ¥ ê´€ë ¨ ì•¡ì…˜ë“¤ (ì¶”ì •)
â”œâ”€â”€ admin/              # ê´€ë¦¬ì UI ë˜ëŠ” í˜ì´ì§€
â”œâ”€â”€ api/                # API í˜¸ì¶œ ê´€ë ¨ ì½”ë“œ
â”œâ”€â”€ auth/               # ë¡œê·¸ì¸/íšŒì›ê°€ì… ë“± ì¸ì¦ ê´€ë ¨
â”œâ”€â”€ boards/             # ê²Œì‹œíŒ ê¸°ëŠ¥ ê´€ë ¨ ë·° ë° ë¡œì§
â”œâ”€â”€ components/         # ì „ì—­ UI ì»´í¬ë„ŒíŠ¸ (í—¤ë”, ë²„íŠ¼ ë“± ì¶”ì •)
â”œâ”€â”€ constants/          # ê³µí†µ ìƒìˆ˜ ì •ì˜
â”œâ”€â”€ context/            # React Context ê¸°ë°˜ ì „ì—­ ìƒíƒœ
â”œâ”€â”€ data/               # ì •ì  ë˜ëŠ” mock ë°ì´í„° (RLS ì •ì±… ì–¸ê¸‰ë¨)
â”œâ”€â”€ help/               # ë¹„ë°€ë²ˆí˜¸ì°¾ê¸°, ì•„ì´ë””ì°¾ê¸° ë¡œì§ì§
â”œâ”€â”€ hooks/              # ì „ì—­ ì»¤ìŠ¤í…€ í›… ëª¨ìŒ
â”œâ”€â”€ lib/                # ê¸°íƒ€ ë¼ì´ë¸ŒëŸ¬ë¦¬/í—¬í¼ (ì¼ë°˜ ìœ í‹¸ë¥˜)
â”œâ”€â”€ livescore/
â”‚   â””â”€â”€ football/       # ì¶•êµ¬ ë¼ì´ë¸ŒìŠ¤ì½”ì–´ ê´€ë ¨ ê¸°ëŠ¥
â”œâ”€â”€ services/           # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, API wrapper ë“±
â”œâ”€â”€ settings/           # ì„¤ì • í˜ì´ì§€ í˜¹ì€ ê¸°ëŠ¥
â”œâ”€â”€ shop/               # ìƒì  ê´€ë ¨ ê¸°ëŠ¥
â”œâ”€â”€ shorts/             # ì§§ì€ ì½˜í…ì¸ ? (Shorts ê¸°ëŠ¥)
â”œâ”€â”€ types/              # ì „ì—­ íƒ€ì… ì •ì˜ (.d.ts ë“±)
â”œâ”€â”€ ui/                 # ìŠ¤íƒ€ì¼ë§ëœ UI ì»´í¬ë„ŒíŠ¸ ëª¨ìŒ? (ì´ˆê¸° ìƒíƒœ)
â”œâ”€â”€ utils/              # ì „ì—­ ìœ í‹¸ í•¨ìˆ˜
â”œâ”€â”€ RootLayoutClient.tsx # í´ë¼ì´ì–¸íŠ¸ ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ layout.tsx          # ë£¨íŠ¸ layout (Next.js app routerìš©)
â”œâ”€â”€ page.tsx            # ë£¨íŠ¸ í˜ì´ì§€
â”œâ”€â”€ dynamic.ts          # ë‹¤ì´ë‚˜ë¯¹ import ê´€ë ¨ ìœ í‹¸?
â””â”€â”€ globals.css         # ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼ ì‹œíŠ¸
```

---

## ğŸ“Œ í´ë”ë³„ ì—­í•  ìš”ì•½

| í´ë”ëª… | ì„¤ëª… |
|--------|------|
| `auth/` | ë¡œê·¸ì¸, íšŒì›ê°€ì… ë“± ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ |
| `boards/` | ê²Œì‹œíŒ ê´€ë ¨ ê¸°ëŠ¥ |
| `shop/` | ìƒí’ˆ êµ¬ë§¤ ë˜ëŠ” í¬ì¸íŠ¸ ìƒì  ë“± ìƒì  ê¸°ëŠ¥ |
| `admin/` | ê´€ë¦¬ì ì „ìš© UI |
| `components/` | ì „ì—­ì—ì„œ ì‚¬ìš©ë˜ëŠ” UI ì»´í¬ë„ŒíŠ¸ë“¤ |
| `hooks/` | ê³µí†µ í›… (ì˜ˆ: useAuth, useToast ë“±) |
| `utils/`, `lib/` | ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜. ë‘˜ì˜ êµ¬ë¶„ì´ ëª¨í˜¸í•˜ë¯€ë¡œ í†µí•© í•„ìš” ê°€ëŠ¥ì„± |
| `api/`, `services/` | API í˜¸ì¶œ or ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ëª¨ë“ˆ |
| `constants/` | ìˆ«ì, ë¬¸ìì—´ ìƒìˆ˜ ë“± |
| `context/` | ì „ì—­ ìƒíƒœ ì»¨í…ìŠ¤íŠ¸ (Auth, Theme ë“±) |
| `types/` | ì „ì—­ íƒ€ì… ì„ ì–¸ |
| `ui/` | UI ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì‹œìŠ¤í…œ (ì•„ì§ ì´ˆê¸° ìƒíƒœ) |
| `livescore/football/` | ì‹¤ì‹œê°„ ì¶•êµ¬ ì ìˆ˜ ê´€ë ¨ ê¸°ëŠ¥ |
| `shorts/` | ì‡¼ì¸  ì½˜í…ì¸  ê´€ë ¨ í˜ì´ì§€ |
| `data/` | mock or ì •ì±… ê¸°ë°˜ ì •ì  ë°ì´í„° |

---

```ts 
// any íƒ€ì… ë¹ ë¥´ê²Œ ì •ë¦¬í•˜ì„¸ìš” ì—¬ëŸ¬ë²ˆ ìˆ˜ì •í•˜ì§€ë§ê³ 
// actions.ts (ì˜ˆì‹œ)
'use server'

import { supabase } from '@/shared/api/supabase'

export async function createBoard(data: { title: string; content: string }) {
  const { error } = await supabase.from('boards').insert(data)
  if (error) throw new Error(error.message)
}
```

---

## ğŸ’¡ ê²½ë¡œ ì„¤ì • (tsconfig.json)

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@app/*": ["src/app/*"],
      "@domains/*": ["src/domains/*"],
      "@shared/*": ["src/shared/*"]
    }
  }
}
```

---

## ğŸ§¬ Supabase + Server Action ì—°ë™ ê°€ì´ë“œ

- `src/shared/api/supabase.ts`ì— í´ë¼ì´ì–¸íŠ¸ ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬
- ëª¨ë“  ì„œë²„ ë¡œì§ì€ `domains/*/actions.ts`ë¡œ ì´ë™
- `use server` ì„ ì–¸ í•„ìˆ˜ (`'use server'`)
- í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì§ì ‘ í˜¸ì¶œ ê°€ëŠ¥
- SSR ëŒ€ì‘ìš© `createServerComponentClient`ëŠ” `shared/api/supabaseServer.ts`ì— êµ¬ì„±

---

## ğŸ§¹ API ì œê±° ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] `src/app/api/` ë””ë ‰í† ë¦¬ ì‚­ì œ
- [x] `GET`, `POST` ë¼ìš°íŠ¸ ëŒ€ì‹  ì„œë²„ ì•¡ì…˜ í•¨ìˆ˜ë¡œ ì „í™˜
- [x] í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ `actions.ts` í•¨ìˆ˜ ì§ì ‘ í˜¸ì¶œ
- [x] ë¡œë”©/ì—ëŸ¬/ì„±ê³µ ìƒíƒœëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ UI ì²˜ë¦¬

---

## ğŸ“Œ ì¶”ê°€ ì¶”ì²œ

- [ ] `shared/hooks`ì— `useToast`, `useQueryParam` ë“± ê¸€ë¡œë²Œ í›… ëª¨ìŒ
- [ ] `shared/components`ì— `Modal`, `Spinner`, `Button` ë“± ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸ ì •ë¦¬
- [ ] `shared/constants`ì— `ROUTES`, `ERROR_MESSAGES`, `ANIMATION_DELAY_MS` ë“± ìƒìˆ˜ ì •ë¦¬
- [ ] `shared/utils`ì— ë‚ ì§œ í¬ë§¤íŒ…, ì •ë ¬, í•„í„°ë§ ë“± ë¡œì§ ë°°ì¹˜

---

## ğŸ ë§ˆë¬´ë¦¬

ì´ êµ¬ì¡°ëŠ” **í† ìŠ¤ ì½”ë“œ í’ˆì§ˆ ê°€ì´ë“œ**ì™€ **Next.js App Router ê¶Œì¥ íŒ¨í„´**, ê·¸ë¦¬ê³  **Supabase ì„œë²„ ì¤‘ì‹¬ ì•„í‚¤í…ì²˜**ì— ë§ì¶° ìµœì í™”ëœ êµ¬ì¡°ì…ë‹ˆë‹¤.  
ì ì§„ì  ë¦¬íŒ©í† ë§ì„ í†µí•´ ìƒì‚°ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ëª¨ë‘ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ì°¸ê³  ë¬¸ì„œ  
> - [í† ìŠ¤ Cursor Rule Gist](https://gist.github.com/toy-crane/dde6258997519d954063a536fc72d055)  
> - [í† ìŠ¤ ì½”ë“œ í€„ë¦¬í‹° ê°€ì´ë“œ](https://frontend-fundamentals.com/code-quality/code/)  
> - [Next.js ì„œë²„ ì•¡ì…˜ ê³µì‹ë¬¸ì„œ](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions)



1. **í”„ë¡œì íŠ¸ êµ¬ì¡°**:
   - ì „í†µì ì¸ Next.js App Router ê¸°ë°˜ìœ¼ë¡œ `src/app` ë””ë ‰í† ë¦¬ì— ì£¼ìš” ì½”ë“œ ìœ„ì¹˜
   - ì¼ë¶€ ë„ë©”ì¸ ê¸°ë°˜ êµ¬ì¡°(`src/domains`)ê°€ ë„ì…ë˜ì—ˆìœ¼ë‚˜ ì™„ì „íˆ ë§ˆì´ê·¸ë ˆì´ì…˜ë˜ì§€ ì•ŠìŒ
   - Supabaseë¥¼ ë°±ì—”ë“œë¡œ ì‚¬ìš© ì¤‘ì´ë©° í˜„ì¬ ì¼ë¶€ API ë¼ìš°íŠ¸ ì‚¬ìš©

2. **ë¬¸ì œì **:
   - API ë¼ìš°íŠ¸ ê¸°ë°˜ êµ¬í˜„ì´ ì•„ì§ ìœ ì§€ë˜ê³  ìˆìŒ (`src/app/api/*`)
   - íŒŒì¼ êµ¬ì¡°ê°€ í˜¼í•©ë˜ì–´ ìˆì–´ ì‘ì§‘ë„ê°€ ë‚®ìŒ
   - ê³µí†µ ëª¨ë“ˆê³¼ ë„ë©”ì¸ ëª¨ë“ˆì´ ëª…í™•íˆ êµ¬ë¶„ë˜ì§€ ì•ŠìŒ

3. **Supabase êµ¬í˜„**:
   - `createClient()` í•¨ìˆ˜ê°€ `src/app/lib/supabase.server.ts`ì— êµ¬í˜„ë˜ì–´ ìˆìŒ
   - ì„œë²„ ì»´í¬ë„ŒíŠ¸ì™€ ì„œë²„ ì•¡ì…˜ ëŒ€ì‘ì„ ìœ„í•œ ë‹¤ì–‘í•œ í´ë¼ì´ì–¸íŠ¸ ìƒì„± ë°©ë²•ì´ ì¤€ë¹„ë¨
   - ì¼ë¶€ API ë¼ìš°íŠ¸ê°€ ì—¬ì „íˆ Supabase ë°ì´í„° ì•¡ì„¸ìŠ¤ë¥¼ ì²˜ë¦¬í•˜ê³  ìˆìŒ

4. **ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°**:
   - `boards`, `posts`, `comments` ë“± ì»¤ë®¤ë‹ˆí‹° ê´€ë ¨ í…Œì´ë¸” êµ¬ì„±
   - `shop_items`, `item_purchases` ë“± ìƒì  ê´€ë ¨ í…Œì´ë¸” ì¡´ì¬
   - ì‚¬ìš©ì í”„ë¡œí•„, í¬ì¸íŠ¸, ê²½í—˜ì¹˜ ë“± ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„

## ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

### 1. ì ì§„ì  ì ‘ê·¼ë²• (ì¶”ì²œ)

ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì§„í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤:

#### 1ë‹¨ê³„: ê¸°ë°˜ êµ¬ì¡° ê°•í™”
- `src/shared/api/supabase.ts` íŒŒì¼ ìƒì„± ë° ê¸°ë³¸ í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„
- `src/shared/api/supabaseServer.ts` ì„œë²„ ì»´í¬ë„ŒíŠ¸ìš© í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„
- ë„ë©”ì¸ë³„ `actions.ts` íŒŒì¼ ê¸°ë³¸ êµ¬ì¡° ì„¤ì •

#### 2ë‹¨ê³„: ë„ë©”ì¸ë³„ ì„œë²„ ì•¡ì…˜ êµ¬í˜„
- ê° ë„ë©”ì¸ ë””ë ‰í† ë¦¬ì— ì„œë²„ ì•¡ì…˜ íŒŒì¼ ì¶”ê°€ (boards, auth, shop ë“±)
- ê°€ì¥ ì¤‘ìš”í•œ ê¸°ëŠ¥ë¶€í„° API ë¼ìš°íŠ¸ë¥¼ ì„œë²„ ì•¡ì…˜ìœ¼ë¡œ ëŒ€ì²´
  - ê²Œì‹œíŒ ëª©ë¡/ìƒì„¸ ì¡°íšŒ
  - ê²Œì‹œê¸€ ì‘ì„±/ìˆ˜ì •/ì‚­ì œ
  - ëŒ“ê¸€ ê¸°ëŠ¥
  - ì¸ì¦ ê´€ë ¨ ê¸°ëŠ¥

#### 3ë‹¨ê³„: í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ì¡°ì •
- ê¸°ì¡´ API í˜¸ì¶œì„ ì„œë²„ ì•¡ì…˜ í˜¸ì¶œë¡œ ëŒ€ì²´
- í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ëŠ¥í•œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¡œ ì „í™˜
- ìƒíƒœ ê´€ë¦¬/í¼ ì²˜ë¦¬ ë“± í´ë¼ì´ì–¸íŠ¸ ë¡œì§ ë¶„ë¦¬

#### 4ë‹¨ê³„: ê³µí†µ ìœ í‹¸ë¦¬í‹° ë° í›… ì´ì „
- `app/utils`, `app/hooks` ë“±ì˜ ê³µí†µ ëª¨ë“ˆì„ `shared` ë””ë ‰í† ë¦¬ë¡œ ì´ì „
- í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ì „ìš© í›…ê³¼ ì„œë²„ ì»´í¬ë„ŒíŠ¸ ìœ í‹¸ì„ ëª…í™•íˆ ë¶„ë¦¬

#### 5ë‹¨ê³„: API ë¼ìš°íŠ¸ ì œê±°
- ëª¨ë“  API ë¼ìš°íŠ¸ ê¸°ëŠ¥ì´ ì„œë²„ ì•¡ì…˜ìœ¼ë¡œ ëŒ€ì²´ë˜ë©´ `src/app/api` ë””ë ‰í† ë¦¬ ì œê±°
- ì°¸ì¡°ë˜ëŠ” ëª¨ë“  API ê²½ë¡œê°€ ì œê±°ë˜ì—ˆëŠ”ì§€ í™•ì¸

### 2. ìš°ì„ ìˆœìœ„ ê²°ì •

ë‹¤ìŒ ê¸°ì¤€ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ìš°ì„ ìˆœìœ„ë¥¼ ê²°ì •í•©ë‹ˆë‹¤:

1. **ì¤‘ìš”ë„**: í•µì‹¬ ê¸°ëŠ¥(ê²Œì‹œíŒ, ì¸ì¦)ë¶€í„° ë§ˆì´ê·¸ë ˆì´ì…˜
2. **ë³µì¡ë„**: ë‹¨ìˆœí•œ ê¸°ëŠ¥ë¶€í„° ì‹œì‘í•˜ì—¬ ë³µì¡í•œ ê¸°ëŠ¥ìœ¼ë¡œ í™•ì¥
3. **ì¢…ì†ì„±**: ë‹¤ë¥¸ ê¸°ëŠ¥ì— ì˜í–¥ì´ ì ì€ ëª¨ë“ˆë¶€í„° ì‘ì—…

## êµ¬ì²´ì ì¸ êµ¬í˜„ ì˜ˆì‹œ

### 1. ê³µí†µ Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì •

```typescript
// src/shared/api/supabase.ts
'use client'

import { createBrowserClient } from '@supabase/ssr'
import { Database } from '@/types/supabase'

export const createClient = () => {
  return createBrowserClient<Database>(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  )
}
```

```typescript
// src/shared/api/supabaseServer.ts
import { createServerClient } from '@supabase/ssr'
import { cookies } from 'next/headers'
import { Database } from '@/types/supabase'

export const createServerComponentClient = () => {
  const cookieStore = cookies()
  
  return createServerClient<Database>(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        get(name) {
          return cookieStore.get(name)?.value
        }
      }
    }
  )
}
```

### 2. ê²Œì‹œíŒ ì„œë²„ ì•¡ì…˜ êµ¬í˜„ ì˜ˆì‹œ

```typescript
// src/domains/boards/actions.ts
'use server'

import { createServerComponentClient } from '@/shared/api/supabaseServer'
import { revalidatePath } from 'next/cache'

// ê²Œì‹œíŒ ëª©ë¡ ì¡°íšŒ
export async function getBoards() {
  const supabase = createServerComponentClient()
  
  const { data, error } = await supabase
    .from('boards')
    .select('id, name, parent_id, display_order, slug, team_id, league_id')
    .order('display_order', { ascending: true })
    .order('name')
  
  if (error) throw new Error('ê²Œì‹œíŒ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨')
  return data
}

// ê²Œì‹œê¸€ ìƒì„±
export async function createPost(formData: FormData) {
  const title = formData.get('title') as string
  const content = formData.get('content') as string
  const boardId = formData.get('boardId') as string
  
  if (!title || !content || !boardId) {
    throw new Error('í•„ìˆ˜ ì…ë ¥ê°’ì´ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤')
  }
  
  const supabase = createServerComponentClient()
  
  // í˜„ì¬ ì‚¬ìš©ì í™•ì¸
  const { data: { user } } = await supabase.auth.getUser()
  if (!user) throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤')
  
  // ê²Œì‹œê¸€ ì‘ì„±
  const { data, error } = await supabase
    .from('posts')
    .insert({
      title,
      content: JSON.parse(content),
      user_id: user.id,
      board_id: boardId
    })
    .select()
    .single()
  
  if (error) throw new Error('ê²Œì‹œê¸€ ì‘ì„± ì‹¤íŒ¨')
  
  // ìºì‹œ ê°±ì‹ 
  revalidatePath(`/boards/${boardId}`)
  
  return data
}
```

### 3. ì„œë²„ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ ì˜ˆì‹œ

```tsx
// src/app/boards/[slug]/page.tsx
import { getBoards } from '@/domains/boards/actions'
import { Suspense } from 'react'
import BoardsList from './components/BoardsList'
import BoardLoadingSkeleton from './components/BoardLoadingSkeleton'

export default async function BoardsPage({ params }: { params: { slug?: string } }) {
  return (
    <div className="container mx-auto py-8">
      <h1 className="text-2xl font-bold mb-6">ê²Œì‹œíŒ</h1>
      
      <Suspense fallback={<BoardLoadingSkeleton />}>
        <BoardsList slug={params.slug} />
      </Suspense>
    </div>
  )
}
```

```tsx
// src/app/boards/[slug]/components/BoardsList.tsx
import { getBoards } from '@/domains/boards/actions'

export default async function BoardsList({ slug }: { slug?: string }) {
  const boards = await getBoards()
  
  // ê²Œì‹œíŒ ë°ì´í„° ê°€ê³µ ë° í‘œì‹œ ë¡œì§
  return (
    <div>
      {/* ê²Œì‹œíŒ ëª©ë¡ í‘œì‹œ */}
    </div>
  )
}
```

## ê¶Œì¥ ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆœì„œ

ë‹¤ìŒ ìˆœì„œë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤:

1. **ê²Œì‹œíŒ/ê²Œì‹œê¸€ ê¸°ëŠ¥**
   - `src/domains/boards/actions.ts` ì„œë²„ ì•¡ì…˜ êµ¬í˜„
   - ê²Œì‹œíŒ ëª©ë¡, ê²Œì‹œê¸€ ì‘ì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ ë§ˆì´ê·¸ë ˆì´ì…˜
   - ê´€ë ¨ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì˜ API í˜¸ì¶œì„ ì„œë²„ ì•¡ì…˜ìœ¼ë¡œ êµì²´

2. **ì¸ì¦ ê´€ë ¨ ê¸°ëŠ¥**
   - `src/domains/auth/actions.ts` ì„œë²„ ì•¡ì…˜ êµ¬í˜„
   - ë¡œê·¸ì¸, íšŒì›ê°€ì…, ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë“± ë§ˆì´ê·¸ë ˆì´ì…˜

3. **ìƒì  ê¸°ëŠ¥**
   - `src/domains/shop/actions.ts` ì„œë²„ ì•¡ì…˜ êµ¬í˜„
   - ìƒí’ˆ ëª©ë¡, êµ¬ë§¤ ê¸°ëŠ¥ ë§ˆì´ê·¸ë ˆì´ì…˜

4. **ë¼ì´ë¸ŒìŠ¤ì½”ì–´**
   - ìƒˆë¡œìš´ ë„ë©”ì¸ ë””ë ‰í† ë¦¬ ìƒì„±: `src/domains/livescore/`
   - ê´€ë ¨ ì„œë²„ ì•¡ì…˜ ë° ì»´í¬ë„ŒíŠ¸ ë§ˆì´ê·¸ë ˆì´ì…˜

## ê²°ë¡  ë° ì£¼ì˜ì‚¬í•­

1. **ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ì´ í•µì‹¬**
   - í•œ ë²ˆì— ëª¨ë“  ê²ƒì„ ë³€ê²½í•˜ë ¤ í•˜ì§€ ë§ê³  ë„ë©”ì¸ë³„ë¡œ ë‹¨ê³„ì  ì ‘ê·¼
   - ê° ë‹¨ê³„ë§ˆë‹¤ í…ŒìŠ¤íŠ¸ ì§„í–‰

2. **ì„œë²„ ì•¡ì…˜ê³¼ ì„œë²„ ì»´í¬ë„ŒíŠ¸ ì´í•´**
   - ì„œë²„ ì•¡ì…˜ì€ í¼ ì œì¶œ, ë°ì´í„° ë³€ê²½ ë“± ë¶€ìˆ˜ íš¨ê³¼ê°€ ìˆëŠ” ì‘ì—…ì— ì‚¬ìš©
   - ì„œë²„ ì»´í¬ë„ŒíŠ¸ëŠ” ë°ì´í„° ì¡°íšŒì™€ UI ë Œë”ë§ì— ì‚¬ìš©

3. **params ë¹„ë™ê¸° ì²˜ë¦¬ ì£¼ì˜**
   - App Routerì—ì„œ paramsëŠ” ë¹„ë™ê¸° ì»¨í…ìŠ¤íŠ¸ì—ì„œ í•´ê²°ë˜ë¯€ë¡œ await í•„ìš”
   - `const params = await ...` í˜•íƒœë¡œ ì²˜ë¦¬

4. **ë§ˆì´ê·¸ë ˆì´ì…˜ í›„ í…ŒìŠ¤íŠ¸ í•„ìˆ˜**
   - ê° ê¸°ëŠ¥ ë§ˆì´ê·¸ë ˆì´ì…˜ í›„ ë™ì‘ ì—¬ë¶€ ê²€ì¦
   - í´ë¼ì´ì–¸íŠ¸ ìƒíƒœì™€ ì„œë²„ ìƒíƒœ ë™ê¸°í™” í™•ì¸

í† ìŠ¤ ì½”ë“œ í’ˆì§ˆ ê°€ì´ë“œë¥¼ ê³ ë ¤í•œ ì´ ì ‘ê·¼ë²•ì€ ì½”ë“œ ì‘ì§‘ë„ë¥¼ ë†’ì´ê³  ìœ ì§€ë³´ìˆ˜ì„±ì„ ê°œì„ í•˜ëŠ” ë™ì‹œì—, ë³´ì•ˆê³¼ ì„±ëŠ¥ ì¸¡ë©´ì—ì„œë„ ì´ì ì„ ì œê³µí•  ê²ƒì…ë‹ˆë‹¤.

