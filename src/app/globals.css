@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --ring: 215 20.2% 65.1%;

    --radius: 0.5rem;

    /* UI 테마 설정 - 동적으로 변경 가능 */
    --border-radius-desktop: 0.5rem; /* rounded-lg */
    --border-radius-mobile: 0; /* rounded-none */

    /* 자주 사용되는 색상 변수 추가 */
    --bg-primary: 248 249 250; /* #F8F9FA - 배경 */
    --bg-secondary: 252 252 252; /* #FCFCFC - 컨테이너 */
    --bg-tertiary: 243 244 246; /* gray-100 */
    --text-primary: 17 24 39; /* gray-900 */
    --text-secondary: 75 85 99; /* gray-600 */
    --text-tertiary: 107 114 128; /* gray-500 */
    --border-primary: 229 231 235; /* gray-200 */
    --border-secondary: 209 213 219; /* gray-300 */
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 85.7% 97.3%;

    --ring: 217.2 32.6% 17.5%;

    /* 커스텀 다크모드 색상 팔레트 */
    --bg-primary: 0 0 0; /* #000000 - 배경 메인 */
    --bg-secondary: 29 29 29; /* #1D1D1D - 컨테이너 */
    --bg-tertiary: 26 26 26; /* #1A1A1A - 헤더 */
    --bg-container-header: 38 38 38; /* #262626 - 컨테이너 헤더 */
    --text-primary: 240 240 240; /* #F0F0F0 - 텍스트 주색상 */
    --text-secondary: 180 180 180; /* 중간 회색 */
    --text-tertiary: 140 140 140; /* 연한 회색 */
    --border-primary: 50 50 50; /* 어두운 테두리 */
    --border-secondary: 60 60 60; /* 중간 테두리 */
    --accent-blue: 74 144 226; /* #4A90E2 - 링크/액센트 */
  }

  * {
    @apply box-border;
  }

  html, body {
    @apply w-full h-full overflow-x-hidden;
    /* 모바일에서 확대/축소 방지 */
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
    /* 모바일에서 배경 고정 */
    position: relative;
    min-height: 100vh;
    min-height: 100dvh; /* 동적 뷰포트 높이 지원 */
  }

  body {
    @apply bg-[#F8F9FA] text-gray-900;
    /* 모바일에서 배경 확대 방지 */
    background-attachment: fixed;
    background-size: 100% 100%;
    background-repeat: no-repeat;
  }

  .dark body {
    @apply bg-black text-[rgb(var(--text-primary))];
  }
}

@layer components {
  /* 입력 필드 자동완성 스타일 */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  input:-webkit-autofill:active,
  textarea:-webkit-autofill,
  textarea:-webkit-autofill:hover,
  textarea:-webkit-autofill:focus,
  textarea:-webkit-autofill:active,
  select:-webkit-autofill,
  select:-webkit-autofill:hover,
  select:-webkit-autofill:focus,
  select:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 1000px white inset !important;
    -webkit-text-fill-color: #111827 !important;
    transition: background-color 5000s ease-in-out 0s;
  }

  .dark input:-webkit-autofill,
  .dark input:-webkit-autofill:hover,
  .dark input:-webkit-autofill:focus,
  .dark input:-webkit-autofill:active,
  .dark textarea:-webkit-autofill,
  .dark textarea:-webkit-autofill:hover,
  .dark textarea:-webkit-autofill:focus,
  .dark textarea:-webkit-autofill:active,
  .dark select:-webkit-autofill,
  .dark select:-webkit-autofill:hover,
  .dark select:-webkit-autofill:focus,
  .dark select:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 1000px #1D1D1D inset !important;
    -webkit-text-fill-color: #F0F0F0 !important;
  }

  /* 동적 테마 클래스 */
  .widget-container,
  .card-container,
  .panel-container {
    @apply border bg-white dark:bg-[#1D1D1D] dark:border-white/10 rounded-dynamic-mobile md:rounded-dynamic;
  }

  .header-background {
    @apply bg-white dark:bg-[#1A1A1A];
    backdrop-filter: blur(8px);
  }

  /* 드롭다운 메뉴에 대한 전역 스타일 - 배경 투명 */
  [data-radix-popper-content-wrapper] {
    background: transparent !important;
  }

  /* 드롭다운 메뉴 항목 스타일 */
  [role="menuitem"] {
    @apply cursor-pointer !important;
  }

  [role="menuitem"]:hover {
    @apply bg-[#F5F5F5] dark:bg-[#262626] !important;
  }
}

/* 최상위 컨테이너만 반응형 테두리 적용 (내부 요소는 원래대로) */
@layer utilities {
  /* 모바일: 모든 rounded 변형에 테마 적용 */
  @media (max-width: 767px) {
    /* rounded-lg 변형 */
    .bg-white.border.rounded-lg:not(input):not(textarea):not(button),
    .border.rounded-lg:not(input):not(textarea):not(button) {
      border-radius: var(--border-radius-mobile) !important;
    }

    /* rounded-md 변형 */
    .bg-white.border.rounded-md:not(input):not(textarea):not(button),
    .border.rounded-md:not(input):not(textarea):not(button) {
      border-radius: var(--border-radius-mobile) !important;
    }

    /* rounded 변형 */
    .bg-white.border.rounded:not(input):not(textarea):not(button),
    .border.rounded:not(input):not(textarea):not(button) {
      border-radius: var(--border-radius-mobile) !important;
    }

    /* rounded-sm 변형 */
    .bg-white.border.rounded-sm:not(input):not(textarea):not(button),
    .border.rounded-sm:not(input):not(textarea):not(button) {
      border-radius: var(--border-radius-mobile) !important;
    }
  }

  /* 데스크탑: 모든 rounded 변형에 테마 적용 */
  @media (min-width: 768px) {
    /* rounded-lg 변형 */
    .bg-white.border.rounded-lg,
    .border.rounded-lg {
      border-radius: var(--border-radius-desktop) !important;
    }

    /* rounded-md 변형 */
    .bg-white.border.rounded-md,
    .border.rounded-md {
      border-radius: var(--border-radius-desktop) !important;
    }

    /* rounded 변형 */
    .bg-white.border.rounded,
    .border.rounded {
      border-radius: var(--border-radius-desktop) !important;
    }

    /* rounded-sm 변형 */
    .bg-white.border.rounded-sm,
    .border.rounded-sm {
      border-radius: var(--border-radius-desktop) !important;
    }
  }

  /* 스크롤바를 숨기는 클래스 */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Firefox에서 스크롤바 숨기기 */
  .no-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
}

/* 스크롤바 숨기기 (전역) */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* =====================================================
   애니메이션 (전역에서 사용)
   ===================================================== */

/* 바텀시트 애니메이션 */
@keyframes slide-up {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

/* 이미지 페이드인 애니메이션 */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-fade-in {
  animation: fade-in 0.4s ease-out forwards;
}

/* 라인업: 선수/이미지 전역 키프레임 */
@keyframes playerFadeIn {
  0% {
    opacity: 0;
    transform: scale(0.3) translateY(-20px);
  }
  60% {
    transform: scale(1.1) translateY(0);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes playerPulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

@keyframes imageSlideIn {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* 모바일 포스트 리스트 오버플로우 강제 제한 */
@media (max-width: 640px) {
  /* 포스트 리스트 컨테이너 */
  [class*="block sm:hidden"] {
    max-width: 100vw !important;
    overflow: hidden !important;
  }

  /* 포스트 아이템 내부 링크 */
  [class*="block sm:hidden"] a {
    max-width: 100% !important;
    overflow: hidden !important;
  }
}
