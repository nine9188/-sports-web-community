# í•«ë”œ ê²Œì‹œíŒ êµ¬í˜„ ê³„íš

> âš ï¸ **ì•Œë¦¼**: ì´ ë¬¸ì„œëŠ” ì´ˆê¸° ì„¤ê³„ ë¬¸ì„œì…ë‹ˆë‹¤. ìµœì‹  êµ¬í˜„ ìƒíƒœ ë° ì‚¬ìš© ê°€ì´ë“œëŠ” **[hotdeal-system.md](./hotdeal-system.md)** ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

## ê°œìš”

í•«ë”œ ê²Œì‹œíŒì€ ì¼ë°˜ ê²Œì‹œíŒê³¼ ë‹¬ë¦¬ **ì‡¼í•‘ëª°, ê°€ê²©, ë°°ì†¡ë¹„, ì™¸ë¶€ë§í¬** ë“± ì •í˜•í™”ëœ ì •ë³´ë¥¼ í‘œì‹œí•´ì•¼ í•œë‹¤.
í¨ì½”(fmkorea) í•«ë”œ ê²Œì‹œíŒ UI/UXë¥¼ ì°¸ê³ í•˜ì—¬ êµ¬í˜„í•œë‹¤.

---

## ì°¸ê³  UI ë¶„ì„ (í¨ì½” í•«ë”œ)

### ë¦¬ìŠ¤íŠ¸ ë·°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â†‘  [ì¸ë„¤ì¼]  í’€ë¬´ì› ì›Œí„°ë£¨í‹´ ìƒìˆ˜ 500ml, 80ê°œ  [2]          â”‚
â”‚ 5           ì‡¼í•‘ëª°: ë„¤ì´ë²„ë©¤ë²„ì‹­ / ê°€ê²©: 11,900ì› / ë°°ì†¡: ë¬´ë£Œ â”‚
â”‚             ë¨¹ê±°ë¦¬ / 18:51 / ì›”1ì´ì‹                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â†‘  [ì¸ë„¤ì¼]  ì—°ì„¸ë‘ìœ  ë¬´ê°€ë‹¹ ê³ ì¹¼ìŠ˜ë‘ìœ  24íŒ©  [2]            â”‚
â”‚ 3           ì‡¼í•‘ëª°: ë”œëŸ¬ / ê°€ê²©: 6,900ì› / ë°°ì†¡: ë¬´ë°°        â”‚
â”‚             ë¨¹ê±°ë¦¬ / 18:37 / ì¸ê³¼ìœ¨                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**êµ¬ì„± ìš”ì†Œ**:
- ì¶”ì²œìˆ˜ (ì™¼ìª½, í™”ì‚´í‘œ + ìˆ«ì)
- ì¸ë„¤ì¼ ì´ë¯¸ì§€
- ì œëª© + [ëŒ“ê¸€ìˆ˜]
- ë©”íƒ€ ì •ë³´: `ì‡¼í•‘ëª°` | `ê°€ê²©` | `ë°°ì†¡`
- í•˜ë‹¨ ì •ë³´: `ì¹´í…Œê³ ë¦¬` | `ì‹œê°„` | `ì‘ì„±ì`

### ìƒì„¸ ë·°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í•«ë”œ â˜†                                                      â”‚
â”‚ [ë„¤ì´ë²„] ë†ë¶€ì°½ê³  ì €ì˜¨ì••ì°© ì§„í•œ êµ­ì‚° 100%ì°¸ê¸°ë¦„ 180ml ì™¸     â”‚
â”‚         ë„¤ì´ë²„ë©¤ë²„ì‹­ (11,160ì›) (ë¬´ë£Œ)                       â”‚
â”‚                                                             â”‚
â”‚ ğŸ‘¤ ë‹¤í•´ë‹ˆì•„        ì¡°íšŒìˆ˜ 6312  ì¶”ì²œìˆ˜ 3  ëŒ“ê¸€ 19            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë§í¬     https://brand.naver.com/nongbuchanggo/...          â”‚
â”‚ ì‡¼í•‘ëª°   ë„¤ì´ë²„                                              â”‚
â”‚ ìƒí’ˆëª…   ë†ë¶€ì°½ê³  ì €ì˜¨ì••ì°© ì§„í•œ êµ­ì‚° 100%ì°¸ê¸°ë¦„ 180ml ì™¸...   â”‚
â”‚ ê°€ê²©     11,160ì›                                            â”‚
â”‚ ë°°ì†¡     ë¬´ë£Œ                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš ï¸ ì¢…ë£Œëœ í•«ë”œì…ë‹ˆë‹¤.                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**êµ¬ì„± ìš”ì†Œ**:
- ì œëª©: `[ì‡¼í•‘ëª°] ìƒí’ˆëª… + ê°€ê²© + ë°°ì†¡ë¹„`
- ì‘ì„±ì, ì¡°íšŒìˆ˜, ì¶”ì²œìˆ˜, ëŒ“ê¸€ìˆ˜
- **ì •ë³´ ë°•ìŠ¤** (ì •í˜•í™”ëœ í…Œì´ë¸”):
  - ë§í¬ (í´ë¦­ ê°€ëŠ¥)
  - ì‡¼í•‘ëª°
  - ìƒí’ˆëª…
  - ê°€ê²©
  - ë°°ì†¡
- **ì¢…ë£Œ ë°°ë„ˆ**: í’ˆì ˆ/ë§ˆê° ì‹œ ë…¸ë€ìƒ‰ ê²½ê³  ë°°ë„ˆ

---

## ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### Option A: JSONB ì»¬ëŸ¼ ì¶”ê°€ (ê¶Œì¥)

ê¸°ì¡´ `posts` í…Œì´ë¸”ì— `deal_info` JSONB ì»¬ëŸ¼ ì¶”ê°€.

```sql
ALTER TABLE posts ADD COLUMN deal_info JSONB DEFAULT NULL;

-- ì¸ë±ìŠ¤ (ê²€ìƒ‰ ì„±ëŠ¥)
CREATE INDEX idx_posts_deal_info ON posts USING GIN (deal_info)
WHERE deal_info IS NOT NULL;
```

**deal_info êµ¬ì¡°**:

```typescript
interface DealInfo {
  store: string;           // ì‡¼í•‘ëª° (ë„¤ì´ë²„, ì¿ íŒ¡, Gë§ˆì¼“ ë“±)
  product_name: string;    // ìƒí’ˆëª…
  price: number;           // íŒë§¤ê°€ (ìˆ«ì)
  original_price?: number; // ì •ê°€ (ì„ íƒ, í• ì¸ìœ¨ ê³„ì‚°ìš©)
  shipping: string;        // ë°°ì†¡ë¹„ ("ë¬´ë£Œ", "3,000ì›" ë“±)
  deal_url: string;        // ì™¸ë¶€ ë§í¬
  is_ended: boolean;       // ì¢…ë£Œ ì—¬ë¶€ (í’ˆì ˆ/ë§ˆê°)
  ended_at?: string;       // ì¢…ë£Œ ì‹œê°„ (ISO ë‚ ì§œ)
  ended_reason?: string;   // ì¢…ë£Œ ì‚¬ìœ  ("í’ˆì ˆ", "ë§ˆê°", "ê°€ê²©ë³€ë™" ë“±)
}
```

**ì¥ì **:
- ê¸°ì¡´ í…Œì´ë¸” êµ¬ì¡° ìœ ì§€
- í•«ë”œì´ ì•„ë‹Œ ê²Œì‹œê¸€ì€ NULL
- ìœ ì—°í•œ í™•ì¥ ê°€ëŠ¥

### Option B: ë³„ë„ í…Œì´ë¸” (ëŒ€ì•ˆ)

```sql
CREATE TABLE hotdeal_info (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  post_id UUID REFERENCES posts(id) ON DELETE CASCADE,
  store VARCHAR(100) NOT NULL,
  product_name VARCHAR(500) NOT NULL,
  price INTEGER NOT NULL,
  original_price INTEGER,
  shipping VARCHAR(50) DEFAULT 'ë¬´ë£Œ',
  deal_url TEXT NOT NULL,
  is_ended BOOLEAN DEFAULT FALSE,
  ended_at TIMESTAMPTZ,
  ended_reason VARCHAR(100),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(post_id)
);
```

**ì¥ì **: ì •ê·œí™”, ëª…í™•í•œ ìŠ¤í‚¤ë§ˆ
**ë‹¨ì **: JOIN í•„ìš”, ë³µì¡ë„ ì¦ê°€

### ì„ íƒ: Option A (JSONB)

- í•«ë”œ ê²Œì‹œíŒë§Œ íŠ¹ìˆ˜ ì²˜ë¦¬
- ì¿¼ë¦¬ ë‹¨ìˆœí™” (JOIN ë¶ˆí•„ìš”)
- í–¥í›„ ë‹¤ë¥¸ íŠ¹ìˆ˜ ê²Œì‹œíŒì—ë„ íŒ¨í„´ ì¬ì‚¬ìš© ê°€ëŠ¥

---

## ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
src/domains/boards/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ hotdeal/                        # í•«ë”œ ì „ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ index.ts                    # ì¬export
â”‚   â”‚   â”œâ”€â”€ HotdealInfoBox.tsx          # â­ Phase 2: ì •ë³´ë°•ìŠ¤
â”‚   â”‚   â”œâ”€â”€ HotdealFormFields.tsx       # â­ Phase 3: ê¸€ì“°ê¸° í¼ í•„ë“œ
â”‚   â”‚   â”œâ”€â”€ HotdealEndedBanner.tsx      # Phase 5: ì¢…ë£Œ ë°°ë„ˆ
â”‚   â”‚   â”œâ”€â”€ HotdealActions.tsx          # Phase 5: ì¢…ë£Œ ë²„íŠ¼/ëª¨ë‹¬
â”‚   â”‚   â”œâ”€â”€ RelatedProducts.tsx         # Phase 6: ìœ ì‚¬ ìƒí’ˆ
â”‚   â”‚   â”œâ”€â”€ InternalPostItem.tsx        # Phase 6: ë‚´ë¶€ ìœ ì‚¬ê¸€
â”‚   â”‚   â””â”€â”€ ExternalProductItem.tsx     # Phase 6: ì™¸ë¶€ ìƒí’ˆ
â”‚   â””â”€â”€ post/
â”‚       â””â”€â”€ ... (ê¸°ì¡´)
â”œâ”€â”€ actions/
â”‚   â”œâ”€â”€ hotdeal/                        # í•«ë”œ ì „ìš© ì„œë²„ ì•¡ì…˜
â”‚   â”‚   â”œâ”€â”€ index.ts                    # ì¬export
â”‚   â”‚   â”œâ”€â”€ createHotdealPost.ts        # â­ Phase 3: í•«ë”œ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ updateHotdealPost.ts        # â­ Phase 3: í•«ë”œ ìˆ˜ì •
â”‚   â”‚   â”œâ”€â”€ endHotdeal.ts               # Phase 5: í•«ë”œ ì¢…ë£Œ
â”‚   â”‚   â”œâ”€â”€ reopenHotdeal.ts            # Phase 5: í•«ë”œ ì¬ì˜¤í”ˆ
â”‚   â”‚   â””â”€â”€ getRelatedPosts.ts          # Phase 6: ìœ ì‚¬ê¸€ ê²€ìƒ‰
â”‚   â””â”€â”€ ... (ê¸°ì¡´ ì•¡ì…˜ë“¤)
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ hotdeal/                        # í•«ë”œ ì „ìš© íƒ€ì…
â”‚   â”‚   â”œâ”€â”€ index.ts                    # â­ Phase 1: ì¬export
â”‚   â”‚   â”œâ”€â”€ deal-info.ts                # â­ Phase 1: DealInfo ì¸í„°í˜ì´ìŠ¤
â”‚   â”‚   â””â”€â”€ constants.ts                # â­ Phase 1: ì‡¼í•‘ëª°/ë°°ì†¡ë¹„ ìƒìˆ˜
â”‚   â””â”€â”€ ... (ê¸°ì¡´ íƒ€ì…ë“¤)
â””â”€â”€ utils/
    â”œâ”€â”€ hotdeal/                        # í•«ë”œ ì „ìš© ìœ í‹¸ë¦¬í‹°
    â”‚   â”œâ”€â”€ index.ts                    # â­ Phase 1: ì¬export
    â”‚   â”œâ”€â”€ format.ts                   # â­ Phase 1: ê°€ê²© í¬ë§·íŒ…, í• ì¸ìœ¨
    â”‚   â”œâ”€â”€ detect.ts                   # â­ Phase 1: ì‡¼í•‘ëª° ê°ì§€, ì œëª© íƒœê·¸
    â”‚   â””â”€â”€ validation.ts               # â­ Phase 1: deal_info ìœ íš¨ì„± ê²€ì‚¬
    â””â”€â”€ ... (ê¸°ì¡´ ìœ í‹¸ë“¤)

src/shared/api/
â”œâ”€â”€ hotdeal/                            # í•«ë”œ ì™¸ë¶€ API (Phase 6)
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ coupang.ts                      # ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤
â”‚   â””â”€â”€ naver-shopping.ts               # ë„¤ì´ë²„ ì‡¼í•‘
â””â”€â”€ ... (ê¸°ì¡´ APIë“¤)

**â­ = ìš°ì„  êµ¬í˜„ ëŒ€ìƒ**
**í´ë” êµ¬ì¡°: hotdeal ê´€ë ¨ íŒŒì¼ë“¤ì€ ëª¨ë‘ hotdeal í´ë” ì•ˆì— êµ¬ì¡°í™”**
```

### 1. HotdealPostItem.tsx (ë°ìŠ¤í¬í†± ë¦¬ìŠ¤íŠ¸)

```tsx
interface HotdealPostItemProps {
  post: Post & { deal_info: DealInfo };
  isLast?: boolean;
  currentPostId?: string;
}

// ë ˆì´ì•„ì›ƒ:
// [ì¶”ì²œ] [ì¸ë„¤ì¼] [ì œëª© + ëŒ“ê¸€ìˆ˜]
//                 [ì‡¼í•‘ëª° | ê°€ê²© | ë°°ì†¡]
//                 [ì¹´í…Œê³ ë¦¬ | ì‹œê°„ | ì‘ì„±ì]
```

**ìŠ¤íƒ€ì¼ íŠ¹ì§•**:
- ì¢…ë£Œëœ í•«ë”œ: `opacity-50` + ì·¨ì†Œì„  ë˜ëŠ” íë¦¬ê²Œ
- ê°€ê²©: `text-red-500 font-bold`
- ë¬´ë£Œë°°ì†¡: `text-green-600`

### 2. HotdealInfoBox.tsx (ìƒì„¸í˜ì´ì§€)

```tsx
interface HotdealInfoBoxProps {
  dealInfo: DealInfo;
}

// í…Œì´ë¸” í˜•íƒœ:
// | ë§í¬     | [í´ë¦­ ê°€ëŠ¥í•œ URL]     |
// | ì‡¼í•‘ëª°   | ë„¤ì´ë²„                |
// | ìƒí’ˆëª…   | ë†ë¶€ì°½ê³  ì°¸ê¸°ë¦„...    |
// | ê°€ê²©     | 11,160ì›              |
// | ë°°ì†¡     | ë¬´ë£Œ                  |
```

### 3. HotdealEndedBanner.tsx

```tsx
interface HotdealEndedBannerProps {
  reason?: string;  // "í’ˆì ˆ", "ë§ˆê°", "ê°€ê²©ë³€ë™"
  endedAt?: string;
}

// UI: ë…¸ë€ìƒ‰ ê²½ê³  ë°°ë„ˆ
// âš ï¸ ì¢…ë£Œëœ í•«ë”œì…ë‹ˆë‹¤. (í’ˆì ˆ)
```

### 4. HotdealFormFields.tsx (ê¸€ì“°ê¸° í¼)

```tsx
// í•«ë”œ ê²Œì‹œíŒì—ì„œ ê¸€ì“°ê¸° ì‹œ ì¶”ê°€ í•„ë“œ:
// - ì‡¼í•‘ëª° (select ë˜ëŠ” input)
// - ìƒí’ˆëª…
// - ê°€ê²©
// - ì •ê°€ (ì„ íƒ)
// - ë°°ì†¡ë¹„
// - ë§í¬ URL
```

---

## íƒ€ì… ì •ì˜

### src/domains/boards/types/hotdeal.ts

```typescript
/**
 * í•«ë”œ ì •ë³´ ì¸í„°í˜ì´ìŠ¤
 */
export interface DealInfo {
  /** ì‡¼í•‘ëª°/íŒë§¤ì²˜ */
  store: string;

  /** ìƒí’ˆëª… */
  product_name: string;

  /** íŒë§¤ê°€ (ì›) */
  price: number;

  /** ì •ê°€ (ì›) - í• ì¸ìœ¨ í‘œì‹œìš© */
  original_price?: number;

  /** ë°°ì†¡ë¹„ */
  shipping: string;

  /** êµ¬ë§¤ ë§í¬ */
  deal_url: string;

  /** ì¢…ë£Œ ì—¬ë¶€ */
  is_ended: boolean;

  /** ì¢…ë£Œ ì‹œê°„ */
  ended_at?: string;

  /** ì¢…ë£Œ ì‚¬ìœ  */
  ended_reason?: 'í’ˆì ˆ' | 'ë§ˆê°' | 'ê°€ê²©ë³€ë™' | 'ë§í¬ì˜¤ë¥˜' | 'ê¸°íƒ€';
}

/**
 * í•«ë”œ ê²Œì‹œê¸€ íƒ€ì… (Post í™•ì¥)
 */
export interface HotdealPost extends Post {
  deal_info: DealInfo;
}

/**
 * ì¸ê¸° ì‡¼í•‘ëª° ëª©ë¡ (ìë™ì™„ì„±ìš©)
 */
export const POPULAR_STORES = [
  'ë„¤ì´ë²„',
  'ì¿ íŒ¡',
  'Gë§ˆì¼“',
  '11ë²ˆê°€',
  'ì˜¥ì…˜',
  'ìœ„ë©”í”„',
  'í‹°ëª¬',
  'SSG',
  'ë¡¯ë°ì˜¨',
  'ì¹´ì¹´ì˜¤',
  'ì•Œë¦¬ìµìŠ¤í”„ë ˆìŠ¤',
  'ì•„ë§ˆì¡´',
  'ê¸°íƒ€',
] as const;

/**
 * ë°°ì†¡ë¹„ ì˜µì…˜
 */
export const SHIPPING_OPTIONS = [
  'ë¬´ë£Œ',
  'ë¬´ë°°',
  'ì¡°ê±´ë¶€ ë¬´ë£Œ',
  '2,500ì›',
  '3,000ì›',
  'ë³„ë„',
] as const;
```

---

## ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜

### src/domains/boards/utils/hotdeal.ts

```typescript
/**
 * ê°€ê²© í¬ë§·íŒ… (ìˆ«ì â†’ "11,160ì›")
 */
export function formatPrice(price: number): string {
  return `${price.toLocaleString('ko-KR')}ì›`;
}

/**
 * í• ì¸ìœ¨ ê³„ì‚°
 */
export function getDiscountRate(price: number, originalPrice?: number): number | null {
  if (!originalPrice || originalPrice <= price) return null;
  return Math.round((1 - price / originalPrice) * 100);
}

/**
 * í•«ë”œ ê²Œì‹œíŒ slug ëª©ë¡
 */
export const HOTDEAL_BOARD_SLUGS = [
  'hotdeal',
  'hotdeal-food',
  'hotdeal-game',
  'hotdeal-pc',
  'hotdeal-appliance',
  'hotdeal-living',
  'hotdeal-fashion',
  'hotdeal-sale',
  'hotdeal-beauty',
  'hotdeal-mobile',
  'hotdeal-package',
  'hotdeal-coupon',
  'hotdeal-apptech',
  'hotdeal-sports',
  'hotdeal-overseas',
  'hotdeal-etc',
] as const;

/**
 * í•«ë”œ ê²Œì‹œíŒì¸ì§€ í™•ì¸
 */
export function isHotdealBoard(boardSlug: string): boolean {
  return HOTDEAL_BOARD_SLUGS.includes(boardSlug as any);
}

/**
 * URLì—ì„œ ì‡¼í•‘ëª° ìë™ ê°ì§€
 */
export function detectStoreFromUrl(url: string): string {
  try {
    const hostname = new URL(url).hostname;

    if (hostname.includes('coupang.com')) return 'ì¿ íŒ¡';
    if (hostname.includes('gmarket.co.kr')) return 'Gë§ˆì¼“';
    if (hostname.includes('11st.co.kr')) return '11ë²ˆê°€';
    if (hostname.includes('auction.co.kr')) return 'ì˜¥ì…˜';
    if (hostname.includes('naver.com')) return 'ë„¤ì´ë²„';
    if (hostname.includes('wemakeprice.com')) return 'ìœ„ë©”í”„';
    if (hostname.includes('tmon.co.kr')) return 'í‹°ëª¬';
    if (hostname.includes('ssg.com')) return 'SSG';
    if (hostname.includes('lotteon.com')) return 'ë¡¯ë°ì˜¨';
    if (hostname.includes('aliexpress.com')) return 'ì•Œë¦¬ìµìŠ¤í”„ë ˆìŠ¤';
    if (hostname.includes('amazon.com')) return 'ì•„ë§ˆì¡´';

    return 'ê¸°íƒ€';
  } catch {
    return 'ê¸°íƒ€';
  }
}

/**
 * ì œëª©ì— ì‡¼í•‘ëª° íƒœê·¸ ì¶”ê°€
 * ì˜ˆ: "LG í†µëŒì´" + "ì¿ íŒ¡" â†’ "[ì¿ íŒ¡] LG í†µëŒì´"
 */
export function addStoreTag(title: string, store: string): string {
  // ì´ë¯¸ íƒœê·¸ê°€ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ë°˜í™˜
  if (title.startsWith('[')) return title;

  return `[${store}] ${title}`;
}
```

---

## ì‡¼í•‘ëª° ìë™ ê°ì§€ ì‹œìŠ¤í…œ

### ê°œìš”

ì‚¬ìš©ìê°€ í•«ë”œ ë§í¬ë¥¼ ì…ë ¥í•˜ë©´ **URLì—ì„œ ì‡¼í•‘ëª°ì„ ìë™ìœ¼ë¡œ ê°ì§€**í•˜ì—¬ í¼ì— ë¯¸ë¦¬ ì±„ì›Œì¤ë‹ˆë‹¤.

### ë™ì‘ ë°©ì‹

```tsx
// HotdealFormFields.tsx ë‚´ë¶€
const [dealUrl, setDealUrl] = useState('');
const [store, setStore] = useState('');

// URL ì…ë ¥ ì‹œ ìë™ ê°ì§€
useEffect(() => {
  if (dealUrl) {
    const detectedStore = detectStoreFromUrl(dealUrl);
    setStore(detectedStore);
  }
}, [dealUrl]);

// ì œëª© ìë™ ìƒì„± (ì„ íƒì‚¬í•­)
const autoGeneratedTitle = addStoreTag(productName, store);
```

### UI íë¦„

```
1. ì‚¬ìš©ìê°€ ë§í¬ ì…ë ¥
   https://www.coupang.com/vp/products/12345

2. ì‡¼í•‘ëª° ìë™ ì„ íƒ
   ì‡¼í•‘ëª°: [ì¿ íŒ¡ â–¼] (ìë™ ì„ íƒ, ìˆ˜ì • ê°€ëŠ¥)

3. ì œëª© ì‘ì„± ì‹œ ìë™ìœ¼ë¡œ [ì‡¼í•‘ëª°] íƒœê·¸ ì¶”ê°€
   ì…ë ¥: "LG í†µëŒì´ ì„¸íƒê¸° 19kg"
   ê²°ê³¼: "[ì¿ íŒ¡] LG í†µëŒì´ ì„¸íƒê¸° 19kg"
```

### í¼ í•„ë“œ ìˆœì„œ

```tsx
<HotdealFormFields>
  {/* 1. ë§í¬ (ë¨¼ì € ì…ë ¥) */}
  <Input
    label="ìƒí’ˆ ë§í¬"
    value={dealUrl}
    onChange={(e) => setDealUrl(e.target.value)}
    placeholder="https://www.coupang.com/..."
  />

  {/* 2. ì‡¼í•‘ëª° (ìë™ ì„ íƒ, ìˆ˜ì • ê°€ëŠ¥) */}
  <Select
    label="ì‡¼í•‘ëª°"
    value={store}
    onChange={(e) => setStore(e.target.value)}
  >
    {POPULAR_STORES.map(s => <option key={s}>{s}</option>)}
  </Select>

  {/* 3. ìƒí’ˆëª… */}
  <Input label="ìƒí’ˆëª…" />

  {/* 4. ê°€ê²© */}
  <Input type="number" label="ê°€ê²© (ì›)" />

  {/* 5. ë°°ì†¡ë¹„ */}
  <Select label="ë°°ì†¡ë¹„">
    {SHIPPING_OPTIONS.map(o => <option key={o}>{o}</option>)}
  </Select>
</HotdealFormFields>
```

---

## êµ¬í˜„ ìˆœì„œ (ìš°ì„ ìˆœìœ„)

### Phase 1: ê¸°ë°˜ ì‘ì—… â­ ë¨¼ì € êµ¬í˜„

| ìˆœì„œ | ì‘ì—… | íŒŒì¼ | ì„¤ëª… |
|------|------|------|------|
| 1-1 | DB ë§ˆì´ê·¸ë ˆì´ì…˜ | Supabase | `deal_info` JSONB ì»¬ëŸ¼ ì¶”ê°€ |
| 1-2 | íƒ€ì… ì •ì˜ | `types/hotdeal.ts` | DealInfo ì¸í„°í˜ì´ìŠ¤ |
| 1-3 | ìœ í‹¸ë¦¬í‹° | `utils/hotdeal.ts` | ê°€ê²© í¬ë§·íŒ…, ì‡¼í•‘ëª° ê°ì§€ |
| 1-4 | Supabase íƒ€ì… ì¬ìƒì„± | `types/supabase.ts` | íƒ€ì… ë™ê¸°í™” |

### Phase 2: ìƒì„¸í˜ì´ì§€ â­ ë¨¼ì € êµ¬í˜„

| ìˆœì„œ | ì‘ì—… | íŒŒì¼ | ì„¤ëª… |
|------|------|------|------|
| 2-1 | ì •ë³´ë°•ìŠ¤ | `HotdealInfoBox.tsx` | ë§í¬/ì‡¼í•‘ëª°/ìƒí’ˆëª…/ê°€ê²©/ë°°ì†¡ í…Œì´ë¸” |
| 2-2 | ìƒì„¸í˜ì´ì§€ í†µí•© | `PostDetail.tsx` | í•«ë”œ ê²Œì‹œíŒì¼ ë•Œ ì •ë³´ë°•ìŠ¤ ë Œë”ë§ |

### Phase 3: ê¸€ì“°ê¸° â­ ë¨¼ì € êµ¬í˜„

| ìˆœì„œ | ì‘ì—… | íŒŒì¼ | ì„¤ëª… |
|------|------|------|------|
| 3-1 | í¼ í•„ë“œ | `HotdealFormFields.tsx` | ì‡¼í•‘ëª°/ê°€ê²©/ë°°ì†¡/ë§í¬ ì…ë ¥ (URL ìë™ê°ì§€) |
| 3-2 | í¼ í†µí•© | `PostWriteForm.tsx` | í•«ë”œ ê²Œì‹œíŒì¼ ë•Œ í•„ë“œ ì¶”ê°€ |
| 3-3 | ì„œë²„ì•¡ì…˜ ìˆ˜ì • | `createPost.ts` | deal_info ì €ì¥ |

---

## ì¶”í›„ êµ¬í˜„ (Phase 4-6)

### Phase 4: ë¦¬ìŠ¤íŠ¸ (ê¸°ì¡´ ì´ë¯¸ì§€í˜• í™œìš©)

| ìˆœì„œ | ì‘ì—… | íŒŒì¼ | ì„¤ëª… |
|------|------|------|------|
| 4-1 | ë©”íƒ€ì •ë³´ ì¶”ê°€ | `PostRenderers.tsx` | ì‡¼í•‘ëª°/ê°€ê²©/ë°°ì†¡ í‘œì‹œ |
| 4-2 | ì¢…ë£Œ ìŠ¤íƒ€ì¼ | `DesktopPostItem.tsx` | ì¢…ë£Œëœ í•«ë”œ opacity ì²˜ë¦¬ |

**ì°¸ê³ **: í˜„ì¬ ì´ë¯¸ì§€í˜• PostListê°€ ì´ë¯¸ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ë©”íƒ€ì •ë³´ë§Œ ì¶”ê°€í•˜ë©´ ë¨.

### Phase 5: ê´€ë¦¬ ê¸°ëŠ¥ (ì¢…ë£Œ ì²˜ë¦¬) - ì¶”í›„ êµ¬í˜„

| ìˆœì„œ | ì‘ì—… | íŒŒì¼ | ì„¤ëª… |
|------|------|------|------|
| 5-1 | ì¢…ë£Œ ë°°ë„ˆ | `HotdealEndedBanner.tsx` | í’ˆì ˆ/ë§ˆê° ê²½ê³  ë°°ë„ˆ |
| 5-2 | ì¢…ë£Œ ì•¡ì…˜ | `endHotdeal.ts` | í•«ë”œ ì¢…ë£Œ ì„œë²„ ì•¡ì…˜ |
| 5-3 | ì¢…ë£Œ ë²„íŠ¼/ëª¨ë‹¬ | `HotdealActions.tsx` | ì‘ì„±ì/ê´€ë¦¬ììš© ì¢…ë£Œ UI |
| 5-4 | ì¢…ë£Œ ë³µêµ¬ ì•¡ì…˜ | `reopenHotdeal.ts` | ì¢…ë£Œ ì·¨ì†Œ ì„œë²„ ì•¡ì…˜ |

<details>
<summary>ì¢…ë£Œ ì²˜ë¦¬ UI ìƒì„¸ ì„¤ê³„ (í¼ì¹˜ê¸°)</summary>

#### ì¢…ë£Œ ì²˜ë¦¬ UI ìƒì„¸ ì„¤ê³„

**1. ì¢…ë£Œ ë²„íŠ¼ ìœ„ì¹˜**
```tsx
// ê²Œì‹œê¸€ ìƒë‹¨ ì•¡ì…˜ ë²„íŠ¼ë“¤
<div className="flex gap-2">
  {isAuthorOrAdmin && (
    <>
      <Button variant="outline" size="sm">ìˆ˜ì •</Button>
      <Button variant="outline" size="sm">ì‚­ì œ</Button>
      <Button
        variant="outline"
        size="sm"
        className="text-orange-600"
        onClick={() => setShowEndModal(true)}
      >
        í•«ë”œ ì¢…ë£Œí•˜ê¸°
      </Button>
    </>
  )}
</div>
```

**2. ì¢…ë£Œ ëª¨ë‹¬**
```tsx
<Dialog open={showEndModal} onOpenChange={setShowEndModal}>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>í•«ë”œ ì¢…ë£Œ</DialogTitle>
      <DialogDescription>
        ì´ í•«ë”œì„ ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì¢…ë£Œëœ í•«ë”œì€ ë¦¬ìŠ¤íŠ¸ì—ì„œ íë¦¬ê²Œ í‘œì‹œë©ë‹ˆë‹¤.
      </DialogDescription>
    </DialogHeader>

    {/* ì¢…ë£Œ ì‚¬ìœ  ì„ íƒ */}
    <RadioGroup value={endReason} onValueChange={setEndReason}>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="í’ˆì ˆ" id="r1" />
        <Label htmlFor="r1">í’ˆì ˆ</Label>
      </div>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="ë§ˆê°" id="r2" />
        <Label htmlFor="r2">ë§ˆê°</Label>
      </div>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="ê°€ê²©ë³€ë™" id="r3" />
        <Label htmlFor="r3">ê°€ê²© ë³€ë™</Label>
      </div>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="ë§í¬ì˜¤ë¥˜" id="r4" />
        <Label htmlFor="r4">ë§í¬ ì˜¤ë¥˜</Label>
      </div>
      <div className="flex items-center space-x-2">
        <RadioGroupItem value="ê¸°íƒ€" id="r5" />
        <Label htmlFor="r5">ê¸°íƒ€</Label>
      </div>
    </RadioGroup>

    <DialogFooter>
      <Button variant="outline" onClick={() => setShowEndModal(false)}>
        ì·¨ì†Œ
      </Button>
      <Button onClick={handleEndHotdeal} disabled={!endReason}>
        ì¢…ë£Œí•˜ê¸°
      </Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

**3. ì¢…ë£Œ ì„œë²„ ì•¡ì…˜**
```typescript
// domains/boards/actions/endHotdeal.ts
'use server';

import { createClient } from '@/shared/api/supabaseServer';
import { revalidatePath } from 'next/cache';

export async function endHotdeal(
  postId: string,
  reason: 'í’ˆì ˆ' | 'ë§ˆê°' | 'ê°€ê²©ë³€ë™' | 'ë§í¬ì˜¤ë¥˜' | 'ê¸°íƒ€'
) {
  const supabase = await createClient();

  // ê¶Œí•œ ì²´í¬
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) throw new Error('Unauthorized');

  const { data: post } = await supabase
    .from('posts')
    .select('author_id, deal_info')
    .eq('id', postId)
    .single();

  if (post.author_id !== user.id) {
    // TODO: ê´€ë¦¬ì ê¶Œí•œ ì²´í¬
    throw new Error('ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤');
  }

  // deal_info ì—…ë°ì´íŠ¸
  const updatedDealInfo = {
    ...post.deal_info,
    is_ended: true,
    ended_at: new Date().toISOString(),
    ended_reason: reason,
  };

  await supabase
    .from('posts')
    .update({ deal_info: updatedDealInfo })
    .eq('id', postId);

  revalidatePath('/boards/[slug]', 'page');
  return { success: true };
}
```

**4. ì¢…ë£Œ ë³µêµ¬ (ì¬ì˜¤í”ˆ)**
```typescript
// domains/boards/actions/reopenHotdeal.ts
'use server';

export async function reopenHotdeal(postId: string) {
  const supabase = await createClient();

  // ê¶Œí•œ ì²´í¬ (ë™ì¼)
  // ...

  const updatedDealInfo = {
    ...post.deal_info,
    is_ended: false,
    ended_at: null,
    ended_reason: null,
  };

  await supabase
    .from('posts')
    .update({ deal_info: updatedDealInfo })
    .eq('id', postId);

  revalidatePath('/boards/[slug]', 'page');
  return { success: true };
}
```

**5. ì¢…ë£Œëœ í•«ë”œ UI ì²˜ë¦¬**
```tsx
// ë¦¬ìŠ¤íŠ¸ì—ì„œ ì¢…ë£Œëœ í•«ë”œ í‘œì‹œ
{post.deal_info?.is_ended && (
  <div className="opacity-50">
    <span className="line-through">{post.title}</span>
    <span className="text-red-500 text-xs ml-2">[ì¢…ë£Œ]</span>
  </div>
)}

// ìƒì„¸í˜ì´ì§€ ë°°ë„ˆ
{post.deal_info?.is_ended && (
  <HotdealEndedBanner
    reason={post.deal_info.ended_reason}
    endedAt={post.deal_info.ended_at}
  />
)}
```

</details>

### Phase 6: ì™¸ë¶€ API ì—°ë™ (ìœ ì‚¬ ìƒí’ˆ ì¶”ì²œ) - ì¶”í›„ êµ¬í˜„

| ìˆœì„œ | ì‘ì—… | íŒŒì¼ | ì„¤ëª… |
|------|------|------|------|
| 6-1 | ì¿ íŒ¡ API ì„¤ì • | `.env.local` | API í‚¤ ì„¤ì • |
| 6-2 | API í´ë¼ì´ì–¸íŠ¸ | `api/coupang.ts` | ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ API í´ë¼ì´ì–¸íŠ¸ |
| 6-3 | ë„¤ì´ë²„ API í´ë¼ì´ì–¸íŠ¸ | `api/naver-shopping.ts` | ë„¤ì´ë²„ ì‡¼í•‘ API |
| 6-4 | ë‚´ë¶€ ìœ ì‚¬ê¸€ ê²€ìƒ‰ | `getRelatedPosts.ts` | ìƒí’ˆëª… ê¸°ë°˜ ê²€ìƒ‰ |
| 6-5 | RelatedProducts ì»´í¬ë„ŒíŠ¸ | `RelatedProducts.tsx` | ìœ ì‚¬ ìƒí’ˆ í‘œì‹œ |
| 6-6 | ìƒì„¸í˜ì´ì§€ í†µí•© | `PostDetail.tsx` | í•˜ë‹¨ì— RelatedProducts ì¶”ê°€ |

**ì°¸ê³ **: ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ëŠ” 15ë§Œì› íŒë§¤ ì‹¤ì  í•„ìš”. ì´ˆê¸°ì—ëŠ” ë„¤ì´ë²„ ì‡¼í•‘ APIë§Œ ì‚¬ìš© ê¶Œì¥.

<details>
<summary>ì™¸ë¶€ API ì—°ë™ ìƒì„¸ ì„¤ê³„ (í¼ì¹˜ê¸°)</summary>

#### ì™¸ë¶€ API ì—°ë™ ìƒì„¸ ì„¤ê³„

**1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
```env
# .env.local
COUPANG_ACCESS_KEY=your_access_key
COUPANG_SECRET_KEY=your_secret_key

NAVER_CLIENT_ID=your_client_id
NAVER_CLIENT_SECRET=your_client_secret
```

**2. ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ API í´ë¼ì´ì–¸íŠ¸**
```typescript
// src/shared/api/coupang.ts

interface CoupangProduct {
  productId: string;
  productName: string;
  productPrice: number;
  productImage: string;
  productUrl: string;
}

export async function searchCoupangProducts(
  keyword: string,
  limit = 5
): Promise<CoupangProduct[]> {
  try {
    const response = await fetch(
      `https://api-gateway.coupang.com/v2/providers/affiliate_open_api/apis/openapi/products/search?keyword=${encodeURIComponent(keyword)}&limit=${limit}`,
      {
        headers: {
          'Authorization': `Bearer ${process.env.COUPANG_ACCESS_KEY}`,
          'Content-Type': 'application/json',
        },
        next: { revalidate: 3600 }, // 1ì‹œê°„ ìºì‹œ
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.data?.productData || [];
  } catch (error) {
    console.error('Coupang API error:', error);
    return [];
  }
}
```

**3. ë„¤ì´ë²„ ì‡¼í•‘ API í´ë¼ì´ì–¸íŠ¸**
```typescript
// src/shared/api/naver-shopping.ts

interface NaverProduct {
  title: string;
  link: string;
  image: string;
  lprice: string; // ìµœì €ê°€
  mallName: string;
}

export async function searchNaverProducts(
  query: string,
  display = 5
): Promise<NaverProduct[]> {
  try {
    const response = await fetch(
      `https://openapi.naver.com/v1/search/shop.json?query=${encodeURIComponent(query)}&display=${display}`,
      {
        headers: {
          'X-Naver-Client-Id': process.env.NAVER_CLIENT_ID!,
          'X-Naver-Client-Secret': process.env.NAVER_CLIENT_SECRET!,
        },
        next: { revalidate: 3600 },
      }
    );

    if (!response.ok) return [];

    const data = await response.json();
    return data.items || [];
  } catch (error) {
    console.error('Naver API error:', error);
    return [];
  }
}
```

**4. ë‚´ë¶€ ìœ ì‚¬ê¸€ ê²€ìƒ‰**
```typescript
// domains/boards/actions/getRelatedPosts.ts
'use server';

export async function getRelatedHotdealPosts(
  keyword: string,
  currentPostId: string,
  limit = 5
) {
  const supabase = await createClient();

  // 6ê°œì›” ì´ë‚´, í‚¤ì›Œë“œ í¬í•¨, í•«ë”œ ê²Œì‹œíŒ
  const sixMonthsAgo = new Date();
  sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);

  const { data } = await supabase
    .from('posts')
    .select('id, title, deal_info, created_at, likes')
    .neq('id', currentPostId)
    .not('deal_info', 'is', null)
    .gte('created_at', sixMonthsAgo.toISOString())
    .ilike('title', `%${keyword}%`)
    .order('created_at', { ascending: false })
    .limit(limit);

  return data || [];
}
```

**5. RelatedProducts ì»´í¬ë„ŒíŠ¸**
```tsx
// domains/boards/components/hotdeal/RelatedProducts.tsx

interface RelatedProductsProps {
  productName: string;
  currentPostId: string;
}

export async function RelatedProducts({
  productName,
  currentPostId,
}: RelatedProductsProps) {
  // ë³‘ë ¬ë¡œ ëª¨ë“  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
  const [internalPosts, coupangProducts, naverProducts] = await Promise.all([
    getRelatedHotdealPosts(productName, currentPostId),
    searchCoupangProducts(productName),
    searchNaverProducts(productName),
  ]);

  return (
    <div className="mt-8 space-y-6">
      {/* ë‚´ë¶€ ìœ ì‚¬ê¸€ */}
      {internalPosts.length > 0 && (
        <section>
          <h3 className="text-lg font-bold mb-3">
            ìœ ì‚¬í•œ ê¸€ì€ 6ê°œì›” ëª©ë¡ì„
          </h3>
          <div className="space-y-2">
            {internalPosts.map((post) => (
              <InternalPostItem key={post.id} post={post} />
            ))}
          </div>
          <button className="text-sm text-blue-600 mt-2">
            ë” ë³´ê¸° (ì´ {internalPosts.length}ê°œ)
          </button>
        </section>
      )}

      {/* ì™¸ë¶€ ì¿ íŒ¡/ë„¤ì´ë²„ ìƒí’ˆ */}
      {(coupangProducts.length > 0 || naverProducts.length > 0) && (
        <section>
          <div className="flex justify-between items-center mb-3">
            <h3 className="text-lg font-bold">ìœ ì‚¬í•œ ì¿ íŒ¡/ì§€ë§ˆì¼“ ìƒí’ˆ</h3>
            <span className="text-xs text-gray-500">
              ì¿ íŒ¡ì—ì„œ / ì§€ë§ˆì¼“ì—ì„œ ë³´ê¸°
            </span>
          </div>

          <div className="space-y-3">
            {/* ì¿ íŒ¡ ìƒí’ˆ */}
            {coupangProducts.map((product) => (
              <ExternalProductItem
                key={product.productId}
                name={product.productName}
                price={product.productPrice}
                image={product.productImage}
                url={product.productUrl}
                store="ì¿ íŒ¡"
              />
            ))}

            {/* ë„¤ì´ë²„ ìƒí’ˆ */}
            {naverProducts.map((product, idx) => (
              <ExternalProductItem
                key={idx}
                name={product.title}
                price={parseInt(product.lprice)}
                image={product.image}
                url={product.link}
                store={product.mallName}
              />
            ))}
          </div>
        </section>
      )}
    </div>
  );
}
```

**6. ìƒí’ˆ ì•„ì´í…œ ì»´í¬ë„ŒíŠ¸**
```tsx
// ExternalProductItem.tsx
interface ExternalProductItemProps {
  name: string;
  price: number;
  image: string;
  url: string;
  store: string;
}

function ExternalProductItem({
  name,
  price,
  image,
  url,
  store,
}: ExternalProductItemProps) {
  return (
    <a
      href={url}
      target="_blank"
      rel="noopener noreferrer"
      className="flex gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800"
    >
      {/* ì¸ë„¤ì¼ */}
      <div className="relative w-20 h-20 flex-shrink-0">
        <Image
          src={image}
          alt={name}
          fill
          className="object-cover rounded"
        />
      </div>

      {/* ìƒí’ˆ ì •ë³´ */}
      <div className="flex-1 min-w-0">
        <p className="text-sm line-clamp-2">{name}</p>
        <div className="flex items-baseline gap-2 mt-1">
          <span className="text-red-600 font-bold">
            {formatPrice(price)}
          </span>
          <span className="text-xs text-gray-500">ë¬´ë£Œë°°ì†¡</span>
        </div>
      </div>

      {/* ì‡¼í•‘ëª° ë°°ì§€ */}
      <div className="flex-shrink-0">
        {store === 'ì¿ íŒ¡' ? (
          <Image src="/icons/coupang.png" alt="ì¿ íŒ¡" width={50} height={20} />
        ) : (
          <span className="text-xs text-gray-500">{store}</span>
        )}
      </div>
    </a>
  );
}
```

**7. ìƒì„¸í˜ì´ì§€ í†µí•©**
```tsx
// PostDetail.tsx
export default async function PostDetail({ postId }) {
  const post = await getPost(postId);

  return (
    <div>
      {/* ê¸°ì¡´ ê²Œì‹œê¸€ ë‚´ìš© */}

      {/* í•«ë”œì´ë©´ ì •ë³´ë°•ìŠ¤ + ìœ ì‚¬ìƒí’ˆ */}
      {post.deal_info && (
        <>
          <HotdealInfoBox dealInfo={post.deal_info} />

          {post.deal_info.is_ended && (
            <HotdealEndedBanner
              reason={post.deal_info.ended_reason}
              endedAt={post.deal_info.ended_at}
            />
          )}

          <Suspense fallback={<Spinner />}>
            <RelatedProducts
              productName={post.deal_info.product_name}
              currentPostId={postId}
            />
          </Suspense>
        </>
      )}
    </div>
  );
}
```

#### API ì œí•œ ì‚¬í•­ ë° ëŒ€ì‘

| API | ì œí•œ | ëŒ€ì‘ |
|-----|------|------|
| ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ | 10íšŒ/ì‹œê°„ | 1ì‹œê°„ ìºì‹œ (`next: { revalidate: 3600 }`) |
| ë„¤ì´ë²„ ì‡¼í•‘ | 25,000íšŒ/ì¼ | 1ì‹œê°„ ìºì‹œ, ì—ëŸ¬ ì‹œ ë¹ˆ ë°°ì—´ ë°˜í™˜ |

**ìºì‹± ì „ëµ**:
- Next.js `fetch` ìºì‹œ í™œìš©
- API ì—ëŸ¬ ì‹œ ì¡°ìš©íˆ ì‹¤íŒ¨ (ë¹ˆ ë°°ì—´ ë°˜í™˜)
- Suspenseë¡œ ë¡œë”© ìƒíƒœ ì²˜ë¦¬

</details>

---

## UI ìŠ¤íƒ€ì¼ ê°€ì´ë“œ

### ê°€ê²© í‘œì‹œ

```tsx
// ì •ìƒê°€
<span className="text-red-600 dark:text-red-400 font-bold">
  11,160ì›
</span>

// í• ì¸ìœ¨ í‘œì‹œ (ì •ê°€ ìˆì„ ë•Œ)
<span className="text-gray-400 line-through text-sm">15,000ì›</span>
<span className="text-red-600 font-bold">11,160ì›</span>
<span className="text-orange-500 text-xs ml-1">26%â†“</span>
```

### ë°°ì†¡ë¹„ í‘œì‹œ

```tsx
// ë¬´ë£Œ
<span className="text-green-600 dark:text-green-400">ë¬´ë£Œ</span>

// ìœ ë£Œ
<span className="text-gray-500">3,000ì›</span>
```

### ì¢…ë£Œëœ í•«ë”œ

```tsx
// ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ
<div className="opacity-50">
  <span className="line-through">{title}</span>
  <span className="text-red-500 text-xs ml-2">[ì¢…ë£Œ]</span>
</div>

// ìƒì„¸í˜ì´ì§€ ë°°ë„ˆ
<div className="bg-yellow-100 dark:bg-yellow-900/30 border-l-4 border-yellow-500 p-4">
  <div className="flex items-center gap-2">
    <AlertTriangle className="w-5 h-5 text-yellow-600" />
    <span className="text-yellow-800 dark:text-yellow-200 font-medium">
      ì¢…ë£Œëœ í•«ë”œì…ë‹ˆë‹¤.
    </span>
    {reason && <span className="text-yellow-600">({reason})</span>}
  </div>
</div>
```

### ì‡¼í•‘ëª° ë°°ì§€

```tsx
// ì‡¼í•‘ëª°ë³„ ìƒ‰ìƒ (ì„ íƒì )
const STORE_COLORS: Record<string, string> = {
  'ë„¤ì´ë²„': 'bg-green-100 text-green-800',
  'ì¿ íŒ¡': 'bg-red-100 text-red-800',
  'Gë§ˆì¼“': 'bg-green-100 text-green-800',
  '11ë²ˆê°€': 'bg-red-100 text-red-800',
  'ì•Œë¦¬': 'bg-orange-100 text-orange-800',
  'default': 'bg-gray-100 text-gray-800',
};
```

---

## RLS ì •ì±…

```sql
-- deal_info ì»¬ëŸ¼ì€ ê¸°ì¡´ posts RLS ì •ì±… ë”°ë¦„
-- ì¶”ê°€ ì •ì±… ë¶ˆí•„ìš”

-- ì¢…ë£Œ ì²˜ë¦¬ëŠ” ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ìë§Œ
-- (ì„œë²„ ì•¡ì…˜ì—ì„œ ê¶Œí•œ ì²´í¬)
```

---

## ì¶”í›„ í™•ì¥ ê°€ëŠ¥ì„±

1. **ê°€ê²© ì•Œë¦¼**: íŠ¹ì • ìƒí’ˆ ê°€ê²© ë³€ë™ ì‹œ ì•Œë¦¼
2. **ìë™ ì¢…ë£Œ**: ì™¸ë¶€ ë§í¬ í¬ë¡¤ë§ìœ¼ë¡œ í’ˆì ˆ ê°ì§€
3. **ê°€ê²© íˆìŠ¤í† ë¦¬**: ìµœì €ê°€ ì¶”ì 
4. **ì‡¼í•‘ëª° ì—°ë™**: APIë¡œ ìƒí’ˆ ì •ë³´ ìë™ ì…ë ¥
5. **í•«ë”œ ë­í‚¹**: ì¶”ì²œìˆ˜/ì¡°íšŒìˆ˜ ê¸°ë°˜ HOT í•«ë”œ

---

## ì˜ˆìƒ ì‘ì—… ì‹œê°„

### ìš°ì„  êµ¬í˜„ (Phase 1-3)

| Phase | ì‘ì—…ëŸ‰ | ë³µì¡ë„ | ë¹„ê³  |
|-------|--------|--------|------|
| Phase 1 | ì‘ìŒ | ë‚®ìŒ | DB ë§ˆì´ê·¸ë ˆì´ì…˜, íƒ€ì… ì •ì˜, ìœ í‹¸ë¦¬í‹° |
| Phase 2 | ì‘ìŒ | ë‚®ìŒ | ì •ë³´ë°•ìŠ¤ ì»´í¬ë„ŒíŠ¸, ìƒì„¸í˜ì´ì§€ í†µí•© |
| Phase 3 | ì¤‘ê°„ | ì¤‘ê°„ | ê¸€ì“°ê¸° í¼, URL ê°ì§€ ìë™í™”, ì„œë²„ ì•¡ì…˜ |

### ì¶”í›„ êµ¬í˜„ (Phase 4-6)

| Phase | ì‘ì—…ëŸ‰ | ë³µì¡ë„ | ë¹„ê³  |
|-------|--------|--------|------|
| Phase 4 | ì‘ìŒ | ë‚®ìŒ | ê¸°ì¡´ ì´ë¯¸ì§€í˜• ë¦¬ìŠ¤íŠ¸ì— ë©”íƒ€ì •ë³´ë§Œ ì¶”ê°€ |
| Phase 5 | ì¤‘ê°„ | ì¤‘ê°„ | ì¢…ë£Œ ì²˜ë¦¬ UI, ëª¨ë‹¬, ì„œë²„ ì•¡ì…˜ |
| Phase 6 | í¼ | ë†’ìŒ | ì™¸ë¶€ API ì—°ë™, ì¿ íŒ¡/ë„¤ì´ë²„ íŒŒíŠ¸ë„ˆ ê°€ì… í•„ìš” |

**Phase 6 ì°¸ê³ **: API í‚¤ ë°œê¸‰ ì‹œê°„ì´ ì¶”ê°€ë¡œ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤: 15ë§Œì› íŒë§¤ ì‹¤ì  í•„ìš”
- ë„¤ì´ë²„ ì‡¼í•‘ API: ì¦‰ì‹œ ë°œê¸‰ ê°€ëŠ¥

---

## ì¶”ê°€ ê³ ë ¤ì‚¬í•­

### 1. ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ API ê°€ì… ì¡°ê±´

ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ëŠ” **15ë§Œì› ì´ìƒ íŒë§¤ ì‹¤ì **ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” ë„¤ì´ë²„ ì‡¼í•‘ APIë§Œ ì‚¬ìš©í•˜ê³ , ì¶”í›„ ì¿ íŒ¡ APIë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

**ëŒ€ì•ˆ**:
```typescript
// ì¿ íŒ¡ API ì—†ì´ë„ ë™ì‘í•˜ë„ë¡ êµ¬í˜„
const [internalPosts, naverProducts] = await Promise.all([
  getRelatedHotdealPosts(productName, currentPostId),
  searchNaverProducts(productName),
  // searchCoupangProducts(productName), // ì£¼ì„ ì²˜ë¦¬
]);
```

### 2. API ë¹„ìš© ê´€ë¦¬

| API | ë¬´ë£Œ í•œë„ | ë¹„ìš© |
|-----|-----------|------|
| ë„¤ì´ë²„ ì‡¼í•‘ | 25,000íšŒ/ì¼ | ë¬´ë£Œ |
| ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ | ì œí•œ ì—†ìŒ | ë¬´ë£Œ (ì œíœ´ ìˆ˜ìµ) |

### 3. ë²•ì  ê³ ë ¤ì‚¬í•­

- **ì œíœ´ ë§ˆì¼€íŒ… í‘œì‹œ**: "ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤" ë¬¸êµ¬ í•„ìˆ˜
- **ì €ì‘ê¶Œ**: ìƒí’ˆ ì´ë¯¸ì§€ëŠ” APIì—ì„œ ì œê³µí•˜ëŠ” URL ê·¸ëŒ€ë¡œ ì‚¬ìš©
- **ê°œì¸ì •ë³´**: ì™¸ë¶€ APIì— ì‚¬ìš©ì ì •ë³´ ì „ì†¡ ê¸ˆì§€

---

## ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|-----------|
| 2026-01-14 | ìµœì´ˆ ë¬¸ì„œ ì‘ì„± |
| 2026-01-16 | ì‡¼í•‘ëª° ìë™ ê°ì§€, ì¢…ë£Œ ì²˜ë¦¬ UI, Phase 6 (ì™¸ë¶€ API) ì¶”ê°€ |
