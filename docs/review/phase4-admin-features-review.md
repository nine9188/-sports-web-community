# Phase 4: ê´€ë¦¬ì ê¸°ëŠ¥ ë¦¬ë·°

> ë¦¬ë·° ì¼ì‹œ: 2025-12-24
> ë¦¬ë·°ì–´: Claude Code

## ê°œìš”

ê´€ë¦¬ì í˜ì´ì§€ì™€ ê¸°ëŠ¥ë“¤ì„ ì ê²€í•©ë‹ˆë‹¤.

---

## 1. íŒŒì¼ êµ¬ì¡°

### 1.1 ê´€ë¦¬ì ë„ë©”ì¸
```
src/domains/admin/
â”œâ”€â”€ actions/
â”‚   â””â”€â”€ suspension.ts      # ì‚¬ìš©ì ì •ì§€ ê´€ë¦¬
â””â”€â”€ components/
    â””â”€â”€ SuspensionManager.tsx
```

### 1.2 ê´€ë¦¬ì í˜ì´ì§€ (34ê°œ)
```
src/app/admin/
â”œâ”€â”€ layout.tsx                    # ê´€ë¦¬ì ë ˆì´ì•„ì›ƒ
â”œâ”€â”€ page.tsx                      # ëŒ€ì‹œë³´ë“œ
â”œâ”€â”€ components/
â”‚   â””â”€â”€ AdminLayoutClient.tsx     # í´ë¼ì´ì–¸íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚
â”œâ”€â”€ banners/                      # ë°°ë„ˆ ê´€ë¦¬
â”‚   â”œâ”€â”€ page.tsx
â”‚   â”œâ”€â”€ init/page.tsx
â”‚   â””â”€â”€ components/BannerManagementClient.tsx
â”‚
â”œâ”€â”€ boards/page.tsx               # ê²Œì‹œíŒ ê´€ë¦¬
â”œâ”€â”€ exp/                          # ê²½í—˜ì¹˜ ê´€ë¦¬
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ components/
â”œâ”€â”€ logs/                         # ë¡œê·¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ components/LogViewer.tsx
â”œâ”€â”€ notices/                      # ê³µì§€ì‚¬í•­ ê´€ë¦¬
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ NoticeManagement.tsx
â”œâ”€â”€ notifications/page.tsx        # ì•Œë¦¼ ë°œì†¡
â”œâ”€â”€ points/                       # í¬ì¸íŠ¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ components/
â”œâ”€â”€ prediction/page.tsx           # ì˜ˆì¸¡ ê´€ë¦¬
â”œâ”€â”€ reports/page.tsx              # ì‹ ê³  ê´€ë¦¬
â”œâ”€â”€ rss/page.tsx                  # RSS ê´€ë¦¬
â”œâ”€â”€ shop/                         # ìƒµ ê´€ë¦¬
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ components/
â”œâ”€â”€ site-management/              # ì‚¬ì´íŠ¸ ì„¤ì •
â”‚   â”œâ”€â”€ page.tsx
â”‚   â”œâ”€â”€ branding/
â”‚   â”œâ”€â”€ seo-v2/
â”‚   â””â”€â”€ ui-theme/
â”œâ”€â”€ users/page.tsx                # ì‚¬ìš©ì ê´€ë¦¬
â”œâ”€â”€ widgets/board-collection/     # ìœ„ì ¯ ì„¤ì •
â”‚   â””â”€â”€ page.tsx
â””â”€â”€ youtube/page.tsx              # YouTube ê´€ë¦¬
```

---

## 2. ê¸°ëŠ¥ ì ê²€

### 2.1 í•„ìˆ˜ ê´€ë¦¬ ê¸°ëŠ¥

| í•­ëª© | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| ê´€ë¦¬ì ì ‘ê·¼ ê¶Œí•œ | âš ï¸ | ë¯¸ë“¤ì›¨ì–´ì—ì„œ ì²´í¬ ì—†ìŒ (ì•„ë˜ ì°¸ê³ ) |
| ëŒ€ì‹œë³´ë“œ (`/admin`) | âœ… | ë©”ì¸ ëŒ€ì‹œë³´ë“œ |
| ì‚¬ìš©ì ê´€ë¦¬ (`/admin/users`) | âœ… | ëª©ë¡, ê²€ìƒ‰, ì •ì§€ |
| ê²Œì‹œíŒ ê´€ë¦¬ (`/admin/boards`) | âœ… | CRUD, ê³„ì¸µ êµ¬ì¡° |
| ì‹ ê³  ê´€ë¦¬ (`/admin/reports`) | âœ… | ì‹ ê³  ëª©ë¡, ì²˜ë¦¬ |
| ê³µì§€ì‚¬í•­ ê´€ë¦¬ (`/admin/notices`) | âœ… | ê³µì§€ CRUD |

### 2.2 ë¶€ê°€ ê´€ë¦¬ ê¸°ëŠ¥

| í•­ëª© | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| í¬ì¸íŠ¸ ê´€ë¦¬ (`/admin/points`) | âœ… | í¬ì¸íŠ¸ ì§€ê¸‰/ì°¨ê° |
| ê²½í—˜ì¹˜ ê´€ë¦¬ (`/admin/exp`) | âœ… | ê²½í—˜ì¹˜/ë ˆë²¨ ê´€ë¦¬ |
| ìƒµ ê´€ë¦¬ (`/admin/shop`) | âœ… | ì•„ì´ì½˜ ìƒí’ˆ ê´€ë¦¬ |
| ë°°ë„ˆ ê´€ë¦¬ (`/admin/banners`) | âœ… | ë°°ë„ˆ CRUD |
| RSS ê´€ë¦¬ (`/admin/rss`) | âœ… | RSS í”¼ë“œ, ìë™í™” |
| YouTube ê´€ë¦¬ (`/admin/youtube`) | âœ… | YouTube í¬ë¡¤ëŸ¬ |
| ì•Œë¦¼ ê´€ë¦¬ (`/admin/notifications`) | âœ… | ê³µì§€ ë°œì†¡ |
| ì˜ˆì¸¡ ê´€ë¦¬ (`/admin/prediction`) | âœ… | ì˜ˆì¸¡ ë¶„ì„ |
| ë¡œê·¸ í™•ì¸ (`/admin/logs`) | âœ… | ì‹œìŠ¤í…œ ë¡œê·¸ |

### 2.3 ì‚¬ì´íŠ¸ ì„¤ì •

| í•­ëª© | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| ì‚¬ì´íŠ¸ ê´€ë¦¬ (`/admin/site-management`) | âœ… | ì„¤ì • ë©”ì¸ |
| ë¸Œëœë”© ì„¤ì • | âœ… | ë¡œê³ , ì‚¬ì´íŠ¸ëª… |
| SEO ì„¤ì • | âœ… | ë©”íƒ€ë°ì´í„° |
| UI í…Œë§ˆ | âœ… | í…Œë§ˆ ì„¤ì • |
| ìœ„ì ¯ ì„¤ì • | âœ… | ê²Œì‹œíŒ ëª¨ìŒ ìœ„ì ¯ |

---

## 3. ìˆ˜ì • ì‚¬í•­

### 3.1 console.log ì œê±° (9ê°œ)

| íŒŒì¼ | ì œê±° ë‚´ìš© |
|------|----------|
| `boards/page.tsx` | ê²Œì‹œíŒ ì¡°íšŒ ë¡œê·¸ 3ê°œ |
| `notices/NoticeManagement.tsx` | ê²Œì‹œíŒ ëª©ë¡ ë¡œê·¸ 1ê°œ |
| `notifications/page.tsx` | ì‚¬ìš©ì ì¡°íšŒ ë¡œê·¸ 1ê°œ |
| `rss/page.tsx` | RSS ìë™í™” ë¡œê·¸ 4ê°œ |

---

## 4. ë°œê²¬ëœ ì´ìŠˆ

### 4.1 ê´€ë¦¬ì ì ‘ê·¼ ê¶Œí•œ ì²´í¬ ë¶€ì¬

**ìœ„ì¹˜**: `middleware.ts`, `AdminLayoutClient.tsx`

**í˜„ì¬ ìƒíƒœ**:
- middleware.ts: `/admin` ê²½ë¡œì— ëŒ€í•œ ê¶Œí•œ ì²´í¬ ì—†ìŒ
- AdminLayoutClient.tsx: `useAuth()` í˜¸ì¶œí•˜ì§€ë§Œ `is_admin` ì²´í¬ ì—†ìŒ

**ìœ„í—˜ë„**: ğŸŸ¡ ì¤‘ê°„

**ì´ìœ **:
- Supabase RLS ì •ì±…ìœ¼ë¡œ ë°ì´í„° ìˆ˜ì¤€ì—ì„œ ë³´í˜¸ë¨
- ê´€ë¦¬ì UIëŠ” ì ‘ê·¼ ê°€ëŠ¥í•˜ì§€ë§Œ ì‹¤ì œ ì‘ì—…ì€ ì‹¤íŒ¨í•¨
- ê·¸ëŸ¬ë‚˜ UI ë…¸ì¶œ ìì²´ê°€ ë³´ì•ˆìƒ ì¢‹ì§€ ì•ŠìŒ

**ê¶Œì¥ ì¡°ì¹˜**:
```typescript
// middleware.tsì— ì¶”ê°€
if (pathname.startsWith('/admin')) {
  if (!user) {
    return NextResponse.redirect(new URL('/signin', request.url))
  }

  // is_admin ì²´í¬ (JWT claims ë˜ëŠ” í”„ë¡œí•„ ì¡°íšŒ)
  const isAdmin = session?.user?.app_metadata?.is_admin
  if (!isAdmin) {
    return NextResponse.redirect(new URL('/', request.url))
  }
}
```

---

## 5. Phase 4 ì™„ë£Œ ìš”ì•½

### ë³€ê²½ ì‚¬í•­

| í•­ëª© | ë‚´ìš© |
|------|------|
| console.log ì œê±° | 9ê°œ (4ê°œ íŒŒì¼) |
| ë³´ì•ˆ ì´ìŠˆ ë°œê²¬ | 1ê°œ (ê´€ë¦¬ì ì ‘ê·¼ ê¶Œí•œ) |

### ë¶„ì„ëœ íŒŒì¼

| ìœ„ì¹˜ | íŒŒì¼ ìˆ˜ |
|------|---------|
| domains/admin | 2ê°œ |
| app/admin | 34ê°œ |
| **ì´ê³„** | **36ê°œ** |

---

## 6. ë‹¤ìŒ ë‹¨ê³„

- [x] ê´€ë¦¬ì ë„ë©”ì¸ ë¶„ì„ âœ…
- [x] ê´€ë¦¬ì í˜ì´ì§€ ë¶„ì„ âœ…
- [x] console.log ì œê±° âœ…
- [ ] ê´€ë¦¬ì ì ‘ê·¼ ê¶Œí•œ ì²´í¬ ì¶”ê°€ (ê¶Œì¥)

---

[â† Phase 3 ë¶€ê°€ ê¸°ëŠ¥ ë¦¬ë·°](./phase3-additional-features-review.md) | [ë©”ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ â†’](../launch-review-checklist.md)
